<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Math87-Tufts University - PS 8 -- Binomial & Poisson distribution</title>
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-MML-AM_CHTML">
	</script>	
        <link rel="stylesheet" href="../css/default.css" />
	<link rel="stylesheet" href="../css/haddock.css" />
	
	<link href="https://fonts.googleapis.com/css?family=Lato:400,700" type="text/css" rel="stylesheet" media="screen" />
	<link href="https://fonts.googleapis.com/css?family=Arimo:400,700" type="text/css" rel="stylesheet" media="screen" />
	<link href="https://fonts.googleapis.com/css?family=Roboto:400,700" type="text/css" rel="stylesheet" media="screen" />
	<link href="https://fonts.googleapis.com/css?family=Inconsolata:400,700" type="text/css" rel="stylesheet" media="screen" />
	<link href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" type="text/css" rel="stylesheet" media="screen" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous" />			
    </head>
    <body>
        <header>
          <div class="logo">
            <a href="../">
	      Math87 - Spring 2024 - Tufts Univ</a>
          </div>
          <nav>
            <a href="../about.html">About</a>
	    <a href="../course-pages/Math087--course-info.html">Info</a>	    
            <a href="../archive.html">Archive</a>
          </nav>
        </header>

        <main role="main">
            <h1>PS 8 -- Binomial & Poisson distribution</h1>
            <ol type="1">
<li><p>For a whole number <span class="math inline">\(N \ge 1\)</span>, recall the following identity:</p>
<p><span class="math display">\[(X+Y)^N = \sum_{j=0}^N \dbinom{N}{j} X^j Y^{N-j}\]</span></p>
<p>where <span class="math inline">\(X,Y\)</span> are <em>variables</em>.</p>
<ol type="a">
<li><p>Explain why the identity <span class="math inline">\((X+Y)^N = (Y+X)^N\)</span> implies that</p>
<p><span class="math display">\[\dbinom{N}{j} = \dbinom{N}{N-j}\]</span></p>
<p>for each <span class="math inline">\(0 \le j \le N\)</span>.</p>
<div class="solution">
<p>For variables <span class="math inline">\(S,T\)</span>, <span class="math inline">\(\dbinom{N}{j}\)</span> is the coefficient of
<span class="math inline">\(S^jT^{N-j}\)</span> in the expression <span class="math inline">\((S+T)^N\)</span></p>
<p>Setting <span class="math inline">\(S = X\)</span> and <span class="math inline">\(T = Y\)</span>, we see that <span class="math inline">\(\dbinom{N}{j}\)</span> is the coefficient
of <span class="math inline">\(X^j Y^{N-j}\)</span> in <span class="math inline">\((X+Y)^N\)</span>.</p>
<p>On the other hand, setting <span class="math inline">\(S = Y\)</span> and <span class="math inline">\(T=X\)</span>, we see that
<span class="math inline">\(\dbinom{N}{N-j}\)</span> is the coefficient of <span class="math inline">\(X^j Y^{N-j}\)</span> in <span class="math inline">\((Y+X)^N = (X+Y)^N\)</span>.</p>
<p>Since equality of polynomials implies equality of their coefficients, we can
conclude that <span class="math inline">\(\dbinom{N}{j} = \dbinom{N}{N-j}\)</span>.</p>
</div></li>
<li><p>Explain why the identity</p>
<p><span class="math display">\[(X+Y)^N = (X+Y)(X+Y)^{N-1}\]</span>
<span class="math display">\[ = X(X+Y)^{N-1} + Y(X+Y)^{N-1}\]</span></p>
<p>implies that</p>
<p><span class="math display">\[\dbinom{N}{j} = \dbinom{N-1}{j} + \dbinom{N-1}{j-1}\]</span></p>
<p>for each <span class="math inline">\(0 \le j \le N-1\)</span>.</p>
<div class="solution">
<p>On the one hand we have
<span class="math display">\[(X+Y)^N = \sum_{j=0}^N \dbinom{N}{j} X^j Y^{N-j}.\]</span></p>
<p>Thus also
<span class="math display">\[(X+Y)^{N-1} = \sum_{j=0}^{N-1} \dbinom{N-1}{j} X^j Y^{N-1-j}.\]</span></p>
<p>Now,we of course have
<span class="math display">\[\begin{align*}
(X+Y)^N &amp;= (X+Y) (X+Y)^{N-1} \\
&amp;= (X+Y)\sum_{j=0}^{N-1} \dbinom{N-1}{j} X^j Y^{N-1-j} \\ 
&amp;= X\sum_{j=0}^{N-1} \dbinom{N-1}{j} X^j Y^{N-1-j} + 
Y\sum_{j=0}^{N-1} \dbinom{N-1}{j} X^j Y^{N-1-j}\\ 	  
&amp;= \sum_{j=0}^{N-1} \dbinom{N-1}{j} X^{j+1}Y^{N-1-j}  + 
   \sum_{j=0}^{N-1} \dbinom{N-1}{j} X^{j}Y^{N-j}  
\end{align*}\]</span>
In the <em>first</em> sum, re-index with <span class="math inline">\(i=j+1\)</span> so that <span class="math inline">\(j=i-1\)</span>; we get
<span class="math display">\[\begin{align*}
&amp;= \sum_{i=1}^{N} \dbinom{N-1}{i-1} X^{i}Y^{N-i}  + 
   \sum_{j=0}^{N-1} \dbinom{N-1}{j} X^{j}Y^{N-j}   \\
&amp;= \sum_{j=1}^{N} \dbinom{N-1}{j-1} X^{j}Y^{N-j}  + j
   \sum_{j=0}^{N-1} \dbinom{N-1}{j} X^{j}Y^{N-j}  
&amp;= (*)
\end{align*}\]</span>
Thus we see that the coefficient of <span class="math inline">\(X^jY^{N-j}\)</span> in <span class="math inline">\((*)\)</span> is
<span class="math display">\[\dbinom{N-1}{j-1} + \dbinom{N-1}{j}.\]</span></p>
<p>Since <span class="math inline">\((*) = (X+Y)^N\)</span>, this permits us to conclude that
<span class="math display">\[\dbinom{N}{j} = \dbinom{N-1}{j-1} + \dbinom{N-1}{j}\]</span>
as required.</p>
</div></li>
</ol>
<p><strong>Hint:</strong> In each case, observe what the indicated identity says
about the coefficient of <span class="math inline">\(X^j Y^{N-j}\)</span> in the given expression(s).</p></li>
<li><p>Using the identities in 1., one can argue inductively that</p>
<p><span class="math display">\[\dbinom{N}{j} = \dfrac{N!}{j! \cdot (N-j)!}\]</span></p>
<p>(in fact, this formula has been used in the <code>notebook</code>!)</p>
<p>Use this identity to compute the following limits:</p>
<p><span class="math display">\[\lim_{N \to \infty} \dfrac{1}{N^3} \dbinom{2N}{3}
\qquad \text{and} \qquad
\lim_{N \to \infty} \dfrac{1}{e^N} \dbinom{N}{N-4}.\]</span></p>
<div class="solution">
<p><span class="math display">\[\begin{align*}
\lim_{N \to \infty} \dfrac{1}{N^3} \dbinom{2N}{3} &amp;= 
\lim_{N \to \infty} \dfrac{1}{N^3} \cdot \dfrac{2N \cdot (2N -1) (2N-2)}{3!}\\
&amp;= \lim_{N \to \infty} \dfrac{2 \cdot (2 - \dfrac{1}{N}) (2- \dfrac{2}{N}) }{3!} = (*)
\end{align*}\]</span>
Since <span class="math inline">\(\lim_{N \to \infty} (2-\dfrac{1}{N}) = \lim_{N \to \infty} (2-\dfrac{2}{N}) = 2\)</span>, we see that
<span class="math display">\[(*) = \dfrac{2^3}{3!} = \dfrac{8}{6} = \dfrac{4}{3}.\]</span></p>
<p><span class="math display">\[\begin{align*}
\lim_{N \to \infty} \dfrac{1}{e^N} \dbinom{N}{N-4} &amp;= 
\lim_{N \to \infty} \dfrac{1}{e^N} \dbinom{N}{4} \\
&amp;= \lim_{N \to \infty} \dfrac{1}{e^N} \dfrac{N(N-1)(N-2)(N-3)}{4!} = (\clubsuit)
\end{align*}\]</span></p>
<p>We now observe that, according to <em>l’hopitals rule</em>, we have
<span class="math display">\[\lim_{N \to \infty} \dfrac{F(N)}{e^N} = 0\]</span>
for <em>any</em> polynomial function <span class="math inline">\(F\)</span>.</p>
<p>Since <span class="math inline">\(F(N) = N(N-1)(N-2)(N-3)\)</span> is a (4th degree) polynomial in <span class="math inline">\(N\)</span>, conclude that
<span class="math inline">\((\clubsuit) = 0\)</span>.</p>
</div></li>
<li><p>Suppose you have estimated the probability that your pet songbird
will sing during a one-hour time period is <code>0.35</code>.</p>
<p>For the following, you should use the <em>binomial distribution</em>.</p>
<ol type="a">
<li><p>Indicate an expression for the probability that the bird will
sing during a ten-minute time period.</p>
<div class="solution">
<p>(You don’t really have to use the <em>binomial distribution</em>; sorry!)</p>
<p>If the bird sings with probability <span class="math inline">\(p\)</span> in an hour, the probability that
the probability that the bird sings during a 10 minute period is <span class="math inline">\(p/6\)</span>.</p>
</div></li>
<li><p>Indicate an expression for the probability that the bird will
not sing during a twenty-minute time period.</p>
<div class="solution">
<p>(You don’t really have to use the <em>binomial distribution</em>; sorry!)</p>
<p>If the bird sings with probability <span class="math inline">\(p\)</span> in an hour, the probability that
the probability that the bird sings during a 20 minute period is <span class="math inline">\(p/3\)</span>.</p>
</div></li>
</ol></li>
<li><p>Suppose that the probability that an automobile accident occurs
during a 24 hour period in a certain stretch of freeway is given by
the number <span class="math inline">\(p\)</span>, <span class="math inline">\(0&lt;p&lt;1\)</span>.</p>
<p>Assume that the random variable <span class="math inline">\(X\)</span> describing the <em>number of
automobile accidents</em> is given by the Poisson distribution.</p>
<p>Thus the probability that there are <span class="math inline">\(k\)</span> accidents is given by</p>
<p><span class="math display">\[P(X = k) = e^{-p} \cdot \dfrac{p^k}{k!}\]</span></p>
<p>Give an expression for the probability that there no more than 3
accidents in a 24-hour period.</p>
<div class="solution">
<p><span class="math display">\[\begin{align*}
P( X \le 3 ) &amp;= \sum_{i=0}^3 P(X = i) \\
&amp;= \sum_{i=0}^3 e^{-p} \dfrac{p^i}{i!} \\
&amp;= e^{-p}\left( 1 + p + \dfrac{p^2}{2} + \dfrac{p^3}{6}\right)
\end{align*}\]</span></p>
</div></li>
<li><p><em>Jane’s Fish Tank Emporium</em> (<em>JFTE</em>) yet again</p>
<p>Recall that in a [notebook] last week, we discussed the operation
of <em>JFTE</em> by considering the question: what is the optimal ordering
strategy for fish tanks: ordering <em>on-demand</em>?, or putting in place
a <em>standing order</em>?</p>
<p>[…]</p>
<p>Edit the <code>JFTE</code> class so that its constructor uses the Poisson
distribution to simulate arrival.</p>
<p>[…]</p>
<p>Run the simulation 10 times with both strategy functions, as was
done in the notebook. Discuss similarities/differences between the
results obtained in the notebook.</p>
<div class="solution">
<p>As in the notes, we create the arrival function:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> math <span class="im">as</span> math</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> poisson(p,m):</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>   <span class="cf">return</span> (<span class="fl">1.</span><span class="op">*</span>p<span class="op">**</span>m<span class="op">/</span> math.factorial(m))<span class="op">*</span>np.exp(<span class="op">-</span>p)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> numpy.random <span class="im">import</span> default_rng</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>rng<span class="op">=</span>default_rng()</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> arrival(p<span class="op">=</span><span class="fl">1.</span><span class="op">/</span><span class="dv">7</span>,M <span class="op">=</span> <span class="dv">10</span>,rng<span class="op">=</span>default_rng()):</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>  qq <span class="op">=</span> <span class="bu">list</span>(<span class="bu">map</span>(<span class="kw">lambda</span> m:poisson(p,m),<span class="bu">range</span>(M)))</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>  qq <span class="op">=</span> qq <span class="op">+</span> [<span class="dv">1</span><span class="op">-</span><span class="bu">sum</span>(qq,<span class="dv">0</span>)]</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a> <span class="cf">return</span> rng.choice(<span class="bu">list</span>(<span class="bu">range</span>(M<span class="op">+</span><span class="dv">1</span>)),p<span class="op">=</span>qq)   </span></code></pre></div>
<p>We make a new class <code>JFTE_poisson</code> by copying the <code>JFTE</code> class, and
replacing the the arrival function in the <code>__init__</code> method:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> JFTE_poisson():</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>,N,prob<span class="op">=</span><span class="fl">1.</span><span class="op">/</span><span class="dv">7</span>):</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.customers <span class="op">=</span> [ arrival(prob) <span class="cf">for</span> n <span class="kw">in</span> <span class="bu">range</span>(N) ]	   </span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.num_days <span class="op">=</span> N</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.reset()</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> reset(<span class="va">self</span>):</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.stock <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.sales <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.lost_sales <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.storage_days <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.max_stock <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> add_stock(<span class="va">self</span>):</span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.stock <span class="op">=</span> <span class="va">self</span>.stock <span class="op">+</span> <span class="dv">1</span></span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="va">self</span>.stock <span class="op">&gt;</span> <span class="va">self</span>.max_stock:</span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>            <span class="va">self</span>.max_stock <span class="op">=</span> <span class="va">self</span>.stock</span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> sale(<span class="va">self</span>):</span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.stock <span class="op">=</span> <span class="va">self</span>.stock <span class="op">-</span> <span class="dv">1</span></span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.sales <span class="op">=</span> <span class="va">self</span>.sales <span class="op">+</span> <span class="dv">1</span></span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> result(<span class="va">self</span>):</span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> { <span class="st">'number_days'</span>: <span class="va">self</span>.num_days,</span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a>                 <span class="st">'weeks'</span>: <span class="va">self</span>.num_days<span class="op">/</span><span class="fl">7.0</span>,</span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a>                 <span class="st">'sales'</span>: <span class="va">self</span>.sales,</span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true" tabindex="-1"></a>                 <span class="st">'lost_sales'</span>: <span class="va">self</span>.lost_sales,</span>
<span id="cb2-30"><a href="#cb2-30" aria-hidden="true" tabindex="-1"></a>                 <span class="st">'storage_days'</span>: <span class="va">self</span>.storage_days,</span>
<span id="cb2-31"><a href="#cb2-31" aria-hidden="true" tabindex="-1"></a>                 <span class="st">'max_stock'</span>: <span class="va">self</span>.max_stock</span>
<span id="cb2-32"><a href="#cb2-32" aria-hidden="true" tabindex="-1"></a>               }</span></code></pre></div>
<p>We keep the old <code>strategy</code> functions <code>stand_order</code> and <code>order_on_demand</code>:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> stand_order(J,dow<span class="op">=</span><span class="dv">6</span>):</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>    <span class="co">## dow = arrival day-of-week for standing order; should be in [0,1,2,3,4,5,6]</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>    <span class="co">## we'll assume that the first day of the ``days`` list is dow=0.</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>    N <span class="op">=</span> J.num_days</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>    J.reset()</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>    <span class="co"># loop through the days</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(N):</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>        c <span class="op">=</span> J.customers[i]            <span class="co">## c is 1 if there is a customer on day i, 0 otherwise</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> dow <span class="op">==</span> np.mod(i,<span class="dv">7</span>):        <span class="co">## add stock on the dow for order arrival</span></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>            J.add_stock()</span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> c<span class="op">&gt;</span><span class="dv">0</span> <span class="kw">and</span> J.stock <span class="op">==</span> <span class="dv">0</span>:</span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>            J.lost_sales <span class="op">=</span> J.lost_sales <span class="op">+</span> <span class="dv">1</span>   <span class="co">## lost sale if no stock</span></span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> c<span class="op">&gt;</span><span class="dv">0</span> <span class="kw">and</span> J.stock <span class="op">&gt;</span> <span class="dv">0</span>:               <span class="co">## sale if adequate stock</span></span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a>            J.sale()</span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a>        J.storage_days <span class="op">=</span> J.storage_days <span class="op">+</span> J.stock    <span class="co">## accumulate total storage costs</span></span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> J.result()</span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> order_on_demand(J):</span>
<span id="cb3-26"><a href="#cb3-26" aria-hidden="true" tabindex="-1"></a>    J.reset()</span>
<span id="cb3-27"><a href="#cb3-27" aria-hidden="true" tabindex="-1"></a>    order_wait <span class="op">=</span> np.inf                        <span class="co">## order_wait represents wait-time</span></span>
<span id="cb3-28"><a href="#cb3-28" aria-hidden="true" tabindex="-1"></a>                                               <span class="co">## until next order arrival</span></span>
<span id="cb3-29"><a href="#cb3-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-30"><a href="#cb3-30" aria-hidden="true" tabindex="-1"></a>    <span class="co">## loop through the customers</span></span>
<span id="cb3-31"><a href="#cb3-31" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> c <span class="kw">in</span> J.customers:</span>
<span id="cb3-32"><a href="#cb3-32" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> c<span class="op">&gt;</span><span class="dv">0</span> <span class="kw">and</span> J.stock<span class="op">==</span><span class="dv">0</span>:                 <span class="co">## record lost sale if no stock</span></span>
<span id="cb3-33"><a href="#cb3-33" aria-hidden="true" tabindex="-1"></a>            J.lost_sales <span class="op">=</span> J.lost_sales <span class="op">+</span> <span class="dv">1</span></span>
<span id="cb3-34"><a href="#cb3-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-35"><a href="#cb3-35" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> c<span class="op">&gt;</span><span class="dv">0</span> <span class="kw">and</span> J.stock<span class="op">&gt;</span><span class="dv">0</span>:                  <span class="co">## record sale if adequate stock</span></span>
<span id="cb3-36"><a href="#cb3-36" aria-hidden="true" tabindex="-1"></a>            J.sale()</span>
<span id="cb3-37"><a href="#cb3-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-38"><a href="#cb3-38" aria-hidden="true" tabindex="-1"></a>        J.storage_days <span class="op">+=</span> J.stock              <span class="co">## accumulate storage days</span></span>
<span id="cb3-39"><a href="#cb3-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-40"><a href="#cb3-40" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span>  J.stock<span class="op">==</span><span class="dv">0</span> <span class="kw">and</span> order_wait <span class="op">==</span> np.inf:  <span class="co">## reorder if stock is empty and no current order</span></span>
<span id="cb3-41"><a href="#cb3-41" aria-hidden="true" tabindex="-1"></a>            order_wait <span class="op">=</span> <span class="dv">5</span></span>
<span id="cb3-42"><a href="#cb3-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-43"><a href="#cb3-43" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> order_wait <span class="op">==</span> <span class="dv">0</span>:                    <span class="co">## stock arrives</span></span>
<span id="cb3-44"><a href="#cb3-44" aria-hidden="true" tabindex="-1"></a>            J.add_stock()</span>
<span id="cb3-45"><a href="#cb3-45" aria-hidden="true" tabindex="-1"></a>            order_wait <span class="op">=</span> np.inf</span>
<span id="cb3-46"><a href="#cb3-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-47"><a href="#cb3-47" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> order_wait<span class="op">&gt;</span><span class="dv">0</span>:                       <span class="co">## decrement arrival time for in-transit orders</span></span>
<span id="cb3-48"><a href="#cb3-48" aria-hidden="true" tabindex="-1"></a>            order_wait <span class="op">-=</span> <span class="dv">1</span></span>
<span id="cb3-49"><a href="#cb3-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-50"><a href="#cb3-50" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> J.result()</span></code></pre></div>
<p>We now create the trials:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> make_trials(trial_weeks <span class="op">=</span> <span class="dv">2</span><span class="op">*</span><span class="dv">52</span>, num_trials <span class="op">=</span> <span class="dv">10</span>):</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> [ JFTE(<span class="dv">7</span><span class="op">*</span>trial_weeks) <span class="cf">for</span> _ <span class="kw">in</span> <span class="bu">range</span>(num_trials) ]</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> report_trials(strategy,trials):</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>    results <span class="op">=</span> [ strategy(t) <span class="cf">for</span> t <span class="kw">in</span> trials ]</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>    details <span class="op">=</span> [<span class="st">'weeks'</span>, <span class="st">'sales'</span>, <span class="st">'lost_sales'</span>, <span class="st">'storage_days'</span>, <span class="st">'max_stock'</span>]</span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>    sd <span class="op">=</span> {i: [r[i] <span class="cf">for</span> r <span class="kw">in</span> results ] <span class="cf">for</span> i <span class="kw">in</span> details}</span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> pd.DataFrame(sd)</span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a><span class="co">## make a list of 10 trials. Each trial has length 2 years</span></span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a>ten_trials <span class="op">=</span> make_trials()</span></code></pre></div>
<p>We report on the results of the <code>standing order</code> strategy:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>stand_results <span class="op">=</span> report_trials(stand_order,ten_trials)</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(stand_results)</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="op">=&gt;</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>   weeks  sales  lost_sales  storage_days  max_stock</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="dv">0</span>  <span class="fl">104.0</span>     <span class="dv">93</span>           <span class="dv">3</span>          <span class="dv">6413</span>         <span class="dv">17</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span>  <span class="fl">104.0</span>     <span class="dv">98</span>           <span class="dv">2</span>          <span class="dv">4060</span>         <span class="dv">13</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span>  <span class="fl">104.0</span>    <span class="dv">101</span>           <span class="dv">2</span>          <span class="dv">3785</span>         <span class="dv">13</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span>  <span class="fl">104.0</span>     <span class="dv">99</span>           <span class="dv">0</span>          <span class="dv">5862</span>         <span class="dv">13</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span>  <span class="fl">104.0</span>     <span class="dv">91</span>           <span class="dv">0</span>          <span class="dv">8886</span>         <span class="dv">20</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span>  <span class="fl">104.0</span>     <span class="dv">78</span>           <span class="dv">0</span>         <span class="dv">13714</span>         <span class="dv">32</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a><span class="dv">6</span>  <span class="fl">104.0</span>     <span class="dv">97</span>           <span class="dv">6</span>          <span class="dv">6582</span>         <span class="dv">19</span></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a><span class="dv">7</span>  <span class="fl">104.0</span>     <span class="dv">99</span>           <span class="dv">1</span>          <span class="dv">3391</span>         <span class="dv">10</span></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a><span class="dv">8</span>  <span class="fl">104.0</span>    <span class="dv">101</span>           <span class="dv">6</span>          <span class="dv">1500</span>          <span class="dv">7</span></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a><span class="dv">9</span>  <span class="fl">104.0</span>    <span class="dv">103</span>           <span class="dv">5</span>          <span class="dv">2013</span>          <span class="dv">7</span></span></code></pre></div>
<p>And we note the <code>mean()</code>s:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>stand_results.mean()</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="op">=&gt;</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>weeks            <span class="fl">104.0</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>sales             <span class="fl">96.0</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>lost_sales         <span class="fl">2.5</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>storage_days    <span class="fl">5620.6</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>max_stock         <span class="fl">15.1</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>dtype: float64   </span></code></pre></div>
<p>Similarly, we report on the <code>on_demand</code> strategy:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>demand_results <span class="op">=</span> report_trials(order_on_demand, ten_trials)</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>demand_results   </span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="op">=&gt;</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>     weeks   sales   lost_sales  storage_days    max_stock</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="dv">0</span>    <span class="fl">104.0</span>      <span class="dv">62</span>           <span class="dv">34</span>           <span class="dv">356</span>            <span class="dv">1</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span>    <span class="fl">104.0</span>      <span class="dv">56</span>           <span class="dv">44</span>           <span class="dv">393</span>            <span class="dv">1</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span>    <span class="fl">104.0</span>      <span class="dv">61</span>           <span class="dv">42</span>           <span class="dv">362</span>            <span class="dv">1</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span>    <span class="fl">104.0</span>      <span class="dv">56</span>           <span class="dv">43</span>           <span class="dv">394</span>            <span class="dv">1</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span>    <span class="fl">104.0</span>      <span class="dv">58</span>           <span class="dv">33</span>           <span class="dv">380</span>            <span class="dv">1</span></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span>    <span class="fl">104.0</span>      <span class="dv">51</span>           <span class="dv">27</span>           <span class="dv">422</span>            <span class="dv">1</span></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a><span class="dv">6</span>    <span class="fl">104.0</span>      <span class="dv">62</span>           <span class="dv">41</span>           <span class="dv">356</span>            <span class="dv">1</span></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a><span class="dv">7</span>    <span class="fl">104.0</span>      <span class="dv">61</span>           <span class="dv">39</span>           <span class="dv">362</span>            <span class="dv">1</span></span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a><span class="dv">8</span>    <span class="fl">104.0</span>      <span class="dv">63</span>           <span class="dv">44</span>           <span class="dv">350</span>            <span class="dv">1</span></span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a><span class="dv">9</span>    <span class="fl">104.0</span>      <span class="dv">61</span>           <span class="dv">47</span>           <span class="dv">362</span>            <span class="dv">1</span></span></code></pre></div>
<p>And we note the <code>mean()</code> again:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>weeks           <span class="fl">104.0</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>sales            <span class="fl">59.1</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>lost_sales       <span class="fl">39.4</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>storage_days    <span class="fl">373.7</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>max_stock         <span class="fl">1.0</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>dtype: float64</span></code></pre></div>
<p>In neither the case of <code>standing order</code> nor in <code>demand_results</code> did using
the poisson distribution have a <em>large</em> affect on the outcomes.</p>
<p>In the case of a standing order, The (mean of the) <code>lost_sales</code> and
<code>max_stock</code> arguably decreased slightly.</p>
</div></li>
</ol>
        </main>

        <footer>
	  <nav>
	    <a href="http://www.tufts.edu">
	      <i class="fas fa-chalkboard"></i>
	      Tufts
	    </a>	    
	    <a href="http://math.tufts.edu">
	      <i class="fas fa-chalkboard-teacher"></i>
	      Tufts Math
	    </a>
	    <a href="https://gmcninch-tufts.github.io/math">
	      <i class="fas fa-coffee"></i>
	      G McNinch
	    </a>
	    <a href="https://github.com/gmcninch-tufts">
	      <i class="fab fa-github"></i>
	      GitHub
	    </a>	    
	  </nav>
        </footer>
    </body>
</html>
