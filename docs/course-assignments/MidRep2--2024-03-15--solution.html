<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Math87-Tufts University - Midterm Project 2 -- ``PageRank`` **Solutions**</title>
	<script>
	  window.MathJax = {
	    options: {
	      ignoreHtmlClass: 'tex2jax_ignore',
	      processHtmlClass: 'tex2jax_process'
	    },
	    tex: {
	      autoload: {
		color: [],
		colorv2: ['color']
	      },
	      packages: {'[+]': ['noerrors']}
	    },
	    loader: {
	      load: ['input/asciimath', '[tex]/noerrors']
	    }
	  };
	</script>
	<script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js" id="MathJax-script"></script>
        <link rel="stylesheet" href="../css/default.css" />
	<link rel="stylesheet" href="../css/haddock.css" />
	
	<link href="https://fonts.googleapis.com/css?family=Lato:400,700" type="text/css" rel="stylesheet" media="screen" />
	<link href="https://fonts.googleapis.com/css?family=Arimo:400,700" type="text/css" rel="stylesheet" media="screen" />
	<link href="https://fonts.googleapis.com/css?family=Roboto:400,700" type="text/css" rel="stylesheet" media="screen" />
	<link href="https://fonts.googleapis.com/css?family=Inconsolata:400,700" type="text/css" rel="stylesheet" media="screen" />
	<link href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" type="text/css" rel="stylesheet" media="screen" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous" />			
    </head>
    <body>
        <header>
          <div class="logo">
            <a href="../">
	      Math87 - Spring 2024 - Tufts Univ</a>
          </div>
          <nav>
            <a href="../about.html">About</a>
	    <a href="../course-pages/Math087--course-info.html">Info</a>	    
            <a href="../archive.html">Archive</a>
          </nav>
        </header>

        <main role="main">
            <h1>Midterm Project 2 -- ``PageRank`` **Solutions**</h1>
            <blockquote>
<p>Consider the following basic model of surfing the web. A user begins
surfing at a particular website. From the set of outgoing links from
this site, a choice is made, with each link given equal probability.
This transition brings the user to a new page, where the process is
repeated. Let’s model this system as a Markov Chain …</p>
</blockquote>
<p>The adjacency matrix <span class="math inline">\(A\)</span> has the property that <span class="math inline">\(A\mathbf{e}_i\)</span>
is the sum of all the standard basis vectors <span class="math inline">\(\mathbf{e}_j\)</span> for which
there is an edge <span class="math inline">\(a_i \to a_j\)</span>. In other words: the <span class="math inline">\(s,t\)</span>
entry of <span class="math inline">\(A\)</span> satisfies <span class="math display">\[A_{s,t} = \left\{\begin{matrix} 1 &amp; \text{if there
is an edge $a_t \to a_s$} \\ 0 &amp; \text{otherwise}\end{matrix}
\right.\]</span></p>
<p>Using <span class="math inline">\(A\)</span>, we create the “naive” transition matrix <span class="math inline">\(T\)</span> whose
entries are the equally-weighted probabilities.</p>
<p>And then we create the <code>PageRank</code> transition matrix for the damping probability <span class="math inline">\(p\)</span>:
<span class="math display">\[C = (1-p)T + p \mathbf{1}\]</span>
where <span class="math inline">\(\mathbf{1}\)</span> is the “all-ones matrix”.</p>
<h1 id="describing-the-matrix-c."><strong>1</strong> Describing the matrix <span class="math inline">\(C\)</span>.</h1>
<p>Given an <span class="math inline">\(n \times n\)</span> adjacency matrix <span class="math inline">\(A\)</span>, let’s write <span class="math inline">\(C\)</span> for the corresponding
<span class="math inline">\(n \times n\)</span> <code>PageRank</code> transition matrix, where <span class="math inline">\(p\)</span> denotes the <em>damping</em> probability.</p>
<p>If the <code>j</code>-th column of the matrix <span class="math inline">\(A\)</span> is equal to
<span class="math inline">\(\mathbf{0}\)</span>, then for each <span class="math inline">\(0 \le i \le n-1\)</span>, we have
<span class="math inline">\(C_{i,j} = \dfrac{1-p}{n} + \dfrac{p}{n} = \dfrac{1}{n}.\)</span></p>
<p>Note that the sum <span class="math inline">\(s\)</span> of the entries in the <span class="math inline">\(j\)</span>-th column of <span class="math inline">\(A\)</span> is
given by the product <span class="math inline">\(\mathbf{1}^T \cdot A \cdot \mathbf{e}_j\)</span> where
<span class="math inline">\(\mathbf{1}\)</span> denotes the “all-ones column vector”.</p>
<p>In other words,</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>s <span class="op">==</span> np.ones(n) <span class="op">@</span> A[:,j]</span></code></pre></div>
<p>Now, suppose the sum <span class="math inline">\(s\)</span> of the entries of the <code>j</code>-th column of the matrix
<span class="math inline">\(A\)</span> satisfies <span class="math inline">\(s&gt;0\)</span>. For each <code>i=0,...,n-1</code> we have</p>
<ul>
<li><p><span class="math inline">\(C_{i,j} = \dfrac{p}{n}\)</span> whenever <span class="math inline">\(A_{i,j} = 0\)</span></p></li>
<li><p><span class="math inline">\(C_{i,j} = \dfrac{1-p}{s} + \dfrac{p}{n}\)</span> whenever <span class="math inline">\(A_{i,j} \ne 0\)</span>.</p></li>
</ul>
<h1 id="producing-the-damped-transition-matrix-via-code"><strong>2</strong> Producing the damped transition matrix via <code>code</code></h1>
<p>Using these formulas, we can write a <code>python</code> function <code>make_transition</code> to create
the <code>PageRank</code> (damped) transition matrix from an adjacency matrix <span class="math inline">\(A\)</span>, as follows:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co">## compute the i,j entry of the naive transition matrix from the adjacency matrix</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="co">##</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> naive_transition(A,n,i,j): </span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>   s <span class="op">=</span> np.ones(n) <span class="op">@</span> A[:,j]</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>   <span class="cf">if</span> s <span class="op">==</span> <span class="dv">0</span>:</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>      <span class="cf">return</span> <span class="dv">1</span><span class="op">/</span>n     <span class="co"># jth node is a sink</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>   <span class="cf">else</span>:</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>      <span class="cf">return</span> A[i,j]<span class="op">/</span>s</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a><span class="co">## make the damped transition matrix from the adjacency matrix </span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a><span class="co">## and the damping probability p</span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a><span class="co">##</span></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> make_transition(A,p):</span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>   (n,m) <span class="op">=</span> A.shape</span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>   <span class="cf">if</span> n <span class="op">==</span> m:</span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>      <span class="cf">return</span> np.array([[ p<span class="op">/</span>n <span class="op">+</span> (<span class="dv">1</span><span class="op">-</span>p)<span class="op">*</span>naive_transition(A,n,i,j) </span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>                         <span class="cf">for</span> j <span class="kw">in</span> <span class="bu">range</span>(n) ] </span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>                         <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(n)  ])</span></code></pre></div>
<p>For example, consider the following adjacency matrix <code>A</code>.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>A <span class="op">=</span> np.array([[ <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span> ],</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>              [ <span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span> ],</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>              [ <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span> ],</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>              [ <span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">0</span> ],</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>              [ <span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">0</span> ]])  </span></code></pre></div>
<p>we use the above code to compute find the damped transition matrix:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>float_formatter <span class="op">=</span> <span class="st">&quot;</span><span class="sc">{:.5f}</span><span class="st">&quot;</span>.<span class="bu">format</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>np.set_printoptions(formatter<span class="op">=</span>{<span class="st">'float_kind'</span>:float_formatter})</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>C <span class="op">=</span> make_transition(A,p<span class="op">=</span><span class="fl">0.8</span>)</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>C</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a><span class="op">=&gt;</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>array([[<span class="fl">0.16000</span>, <span class="fl">0.16000</span>, <span class="fl">0.16000</span>, <span class="fl">0.16000</span>, <span class="fl">0.20000</span>],</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>       [<span class="fl">0.22667</span>, <span class="fl">0.16000</span>, <span class="fl">0.16000</span>, <span class="fl">0.16000</span>, <span class="fl">0.20000</span>],</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>       [<span class="fl">0.22667</span>, <span class="fl">0.26000</span>, <span class="fl">0.16000</span>, <span class="fl">0.16000</span>, <span class="fl">0.20000</span>],</span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>       [<span class="fl">0.22667</span>, <span class="fl">0.16000</span>, <span class="fl">0.36000</span>, <span class="fl">0.16000</span>, <span class="fl">0.20000</span>],</span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>       [<span class="fl">0.16000</span>, <span class="fl">0.26000</span>, <span class="fl">0.16000</span>, <span class="fl">0.36000</span>, <span class="fl">0.20000</span>]])</span></code></pre></div>
<p>And we can test that the result is indeed a <em>stochastic matrix</em>:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>np.ones(<span class="dv">5</span>) <span class="op">@</span> C</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="op">=&gt;</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>array([<span class="fl">1.00000</span>, <span class="fl">1.00000</span>, <span class="fl">1.00000</span>, <span class="fl">1.00000</span>, <span class="fl">1.00000</span>])   </span></code></pre></div>
<h1 id="the-principal-eigenvector-for-a-particular-directed-graph."><strong>3</strong> The principal eigenvector for a particular directed graph.</h1>
<p>Let us consider the directed graph</p>
<p><img src="../course-assets/images/MidRep2--graph-simple-1.gv.png" /></p>
<p>The graph has 5 nodes. The corresponding adjacency matrix is given by</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>A3 <span class="op">=</span> np.array([[<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span> ],</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>               [<span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span> ],</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>               [<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span> ],</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>               [<span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">0</span> ],</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>               [<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">0</span> ]])</span></code></pre></div>
<p>We compute the damped transition matrices for damping <code>p=.8</code> and
when <code>p=.4</code>, and we compute corresponding eigenvalues/eigenvectors:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>C3<span class="op">=</span>make_transition(A3,p<span class="op">=</span><span class="fl">.8</span>)</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>D3<span class="op">=</span>make_transition(A3,p<span class="op">=</span><span class="fl">.4</span>)</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>valsC3,vecsC3 <span class="op">=</span> np.linalg.eig(C3)</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="op">=&gt;</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>array([ <span class="fl">1.</span>       <span class="op">+</span><span class="ot">0.j</span>        , <span class="op">-</span><span class="fl">0.0155051</span><span class="op">+</span><span class="ot">0.10500275j</span>,</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>       <span class="op">-</span><span class="fl">0.0155051</span><span class="op">-</span><span class="ot">0.10500275j</span>, <span class="op">-</span><span class="fl">0.0644949</span><span class="op">+</span><span class="ot">0.0239671j</span> ,</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>       <span class="op">-</span><span class="fl">0.0644949</span><span class="op">-</span><span class="ot">0.0239671j</span> ])</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>	   </span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>valsD3,vecsD3 <span class="op">=</span> np.linalg.eig(D3)</span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>valsD3</span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a><span class="op">=&gt;</span></span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>array([ <span class="fl">1.</span>        <span class="op">+</span><span class="ot">0.j</span>        , <span class="op">-</span><span class="fl">0.04651531</span><span class="op">+</span><span class="ot">0.31500826j</span>,</span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>       <span class="op">-</span><span class="fl">0.04651531</span><span class="op">-</span><span class="ot">0.31500826j</span>, <span class="op">-</span><span class="fl">0.19348469</span><span class="op">+</span><span class="ot">0.0719013j</span> ,</span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>       <span class="op">-</span><span class="fl">0.19348469</span><span class="op">-</span><span class="ot">0.0719013j</span> ])</span></code></pre></div>
<p>In both cases, we see that the 1-eigenvector is in the 0th column.
Recall that we need to <em>normalize</em> the eigenvectors to obtain probability vectors
(we must arrange that the sum of the entries in the vector is equal to 1):</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> normalize(v):</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>    n <span class="op">=</span> v.shape</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>    s <span class="op">=</span> np.ones(n) <span class="op">@</span> v</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>    vv <span class="op">=</span> (<span class="dv">1</span><span class="op">/</span>s)<span class="op">*</span>v                    <span class="co">## compute the normalized vector</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> np.real_if_close(vv)     <span class="co">## if the imaginary parts of the coeffs are &quot;small&quot;, drop them</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a><span class="co">## normalized 1-eigenvector for damping p=.8</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>normalize(vecsC3[:,<span class="dv">0</span>])</span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a><span class="op">=&gt;</span></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>array([<span class="fl">0.16925</span>, <span class="fl">0.18054</span>, <span class="fl">0.19859</span>, <span class="fl">0.22026</span>, <span class="fl">0.23136</span>])</span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>	   </span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a><span class="co">## normalized 1-eigenvector for damping p=.4</span></span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>normalize(vecsD3[:,<span class="dv">0</span>])</span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a><span class="op">=&gt;</span></span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>array([<span class="fl">0.11713</span>, <span class="fl">0.14055</span>, <span class="fl">0.18272</span>, <span class="fl">0.25019</span>, <span class="fl">0.30941</span>])</span></code></pre></div>
<p>Now, our construction has guaranteed that – for each damping
probability <span class="math inline">\(p\)</span> – the damped transition matrix correspond to
transition diagrams for Markov processes satisfying the hypotheses of
the the Frobenius-Perron Theorem. According to that Theorem, the
transition matrix has eigenvalue <span class="math inline">\(\lambda = 1\)</span> with multiplicity 1,
and all other eigenvalues <span class="math inline">\(\mu\)</span> have <span class="math inline">\(|\mu| &lt; 1\)</span>.</p>
<p>If <span class="math inline">\(\mathbf{v}\)</span> is a normalized eigenvector for eigenvalue <span class="math inline">\(\lambda = 1\)</span>, this vector describes the probabilities for the long-term behavior
of the system. In other words, the coefficient in the <code>jth</code> entry of
this normalized eigenvector represents the probability that a random
surfer is on the <code>jth</code> page in the long run.</p>
<p>In the two examples just calculated, we see that the probability of
being in node <code>V5</code> in the long run is greatest; when <code>p=0.8</code> that
probability is about 0.21 (or 23%) and when <code>p=0.4</code> that probability
is about <code>0.31</code> (or 31%).</p>
<p>In our example, we can compare the probabilities predicted by the eigenvector
with those predicted by examining powers of the matrices <code>C3</code> and <code>D3</code>.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>np.linalg.matrix_power(C3,<span class="dv">10</span>)</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="op">=&gt;</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>array([[<span class="fl">0.16925</span>, <span class="fl">0.16925</span>, <span class="fl">0.16925</span>, <span class="fl">0.16925</span>, <span class="fl">0.16925</span>],</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>       [<span class="fl">0.18054</span>, <span class="fl">0.18054</span>, <span class="fl">0.18054</span>, <span class="fl">0.18054</span>, <span class="fl">0.18054</span>],</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>       [<span class="fl">0.19859</span>, <span class="fl">0.19859</span>, <span class="fl">0.19859</span>, <span class="fl">0.19859</span>, <span class="fl">0.19859</span>],</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>       [<span class="fl">0.22026</span>, <span class="fl">0.22026</span>, <span class="fl">0.22026</span>, <span class="fl">0.22026</span>, <span class="fl">0.22026</span>],</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>       [<span class="fl">0.23136</span>, <span class="fl">0.23136</span>, <span class="fl">0.23136</span>, <span class="fl">0.23136</span>, <span class="fl">0.23136</span>]])</span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>	   </span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>np.linalg.matrix_power(D3,<span class="dv">10</span>)</span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a><span class="op">=&gt;</span></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>array([[<span class="fl">0.11713</span>, <span class="fl">0.11713</span>, <span class="fl">0.11713</span>, <span class="fl">0.11713</span>, <span class="fl">0.11713</span>],</span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>       [<span class="fl">0.14055</span>, <span class="fl">0.14055</span>, <span class="fl">0.14056</span>, <span class="fl">0.14056</span>, <span class="fl">0.14055</span>],</span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>       [<span class="fl">0.18272</span>, <span class="fl">0.18272</span>, <span class="fl">0.18272</span>, <span class="fl">0.18273</span>, <span class="fl">0.18272</span>],</span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a>       [<span class="fl">0.25019</span>, <span class="fl">0.25019</span>, <span class="fl">0.25018</span>, <span class="fl">0.25019</span>, <span class="fl">0.25019</span>],</span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a>       [<span class="fl">0.30941</span>, <span class="fl">0.30942</span>, <span class="fl">0.30941</span>, <span class="fl">0.30940</span>, <span class="fl">0.30941</span>]])</span></code></pre></div>
<h1 id="the-principal-eigenvector-for-a-variation-of-the-above-directed-graph."><strong>4</strong> The principal eigenvector for a variation of the above directed graph.</h1>
<p>The following diagram describes the same nodes as the previous diagram,
but includes some additional edges (i.e. links) – namely, it includes
links <code>[w -&gt; V1]</code> for each vertex <code>[w]</code> different from <code>[V1]</code>.</p>
<p><img src="../course-assets/images/MidRep2--graph-simple-2.gv.png" /></p>
<p>The adjacency matrix is given by</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>A4 <span class="op">=</span> np.array([[<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span> ],</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>               [<span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span> ],</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>               [<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span> ],</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>               [<span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">0</span> ],</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>               [<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">0</span> ]])</span></code></pre></div>
<p>We repeat the calculations carried out above for this new adjacency matrix.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co">## calculate the damped transition matrices</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="co">##</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>C4<span class="op">=</span>make_transition(A4,p<span class="op">=</span><span class="fl">.8</span>)</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>D4<span class="op">=</span>make_transition(A4,p<span class="op">=</span><span class="fl">.4</span>)</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a><span class="co">## find the eigenvalues/vectors for the transition matrix C4:</span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>valsC4,vecsC4 <span class="op">=</span> np.linalg.eig(C4)</span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>valsC4</span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a><span class="op">=&gt;</span></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>array([ <span class="fl">1.</span>        <span class="op">+</span><span class="ot">0.j</span>        , <span class="op">-</span><span class="fl">0.07788218</span><span class="op">+</span><span class="ot">0.07338108j</span>,</span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>       <span class="op">-</span><span class="fl">0.07788218</span><span class="op">-</span><span class="ot">0.07338108j</span>, <span class="op">-</span><span class="fl">0.02211782</span><span class="op">+</span><span class="ot">0.05824321j</span>,</span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>       <span class="op">-</span><span class="fl">0.02211782</span><span class="op">-</span><span class="ot">0.05824321j</span>])</span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a>	   </span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a><span class="co">## find the eigenvalues/vectors for the transition matrix D4:</span></span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a>valsD4,vecsD4 <span class="op">=</span> np.linalg.eig(D4)</span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a>valsD4</span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a><span class="op">=&gt;</span></span>
<span id="cb11-18"><a href="#cb11-18" aria-hidden="true" tabindex="-1"></a>array([ <span class="fl">1.</span>        <span class="op">+</span><span class="ot">0.j</span>        , <span class="op">-</span><span class="fl">0.23364655</span><span class="op">+</span><span class="ot">0.22014324j</span>,</span>
<span id="cb11-19"><a href="#cb11-19" aria-hidden="true" tabindex="-1"></a>       <span class="op">-</span><span class="fl">0.23364655</span><span class="op">-</span><span class="ot">0.22014324j</span>, <span class="op">-</span><span class="fl">0.06635345</span><span class="op">+</span><span class="ot">0.17472963j</span>,</span>
<span id="cb11-20"><a href="#cb11-20" aria-hidden="true" tabindex="-1"></a>       <span class="op">-</span><span class="fl">0.06635345</span><span class="op">-</span><span class="ot">0.17472963j</span>])</span></code></pre></div>
<p>We see again that each transition matrix has eigenvalue 1 with multiplicity 1.
The corresponding normalized eigenvectors are given by</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co">## normalized 1-eigenvector for damping p=.8</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>normalize(vecsC4[:,<span class="dv">0</span>])</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="op">=&gt;</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>array([<span class="fl">0.24841</span>, <span class="fl">0.17656</span>, <span class="fl">0.18833</span>, <span class="fl">0.19539</span>, <span class="fl">0.19131</span>])</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>	   </span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a><span class="co">## normalized 1-eigenvector for damping p=.4</span></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>normalize(vecsD4[:,<span class="dv">0</span>])</span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a><span class="op">=&gt;</span></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>array([<span class="fl">0.31990</span>, <span class="fl">0.14398</span>, <span class="fl">0.17277</span>, <span class="fl">0.19581</span>, <span class="fl">0.16754</span>])</span></code></pre></div>
<p>Now in both cases we see that the page <code>V1</code> now has the highest
probability (0.25 when <code>p=.8</code> and 0.32 when <code>p=.4</code>). This seems
reasonable because in the revised diagram, there are many more links
to the page <code>V1</code>.</p>
<h1 id="the-frobenius-perron-theorem-for-the-damped-transition-matrix."><strong>5</strong> The Frobenius-Perron Theorem for the damped transition matrix.</h1>
<p>For any (finite) directed graph, we can create the adjacency matrix <code>A</code>
and for a probability <code>p&gt;0</code>, we can produce the damped
<code>PageRank</code> transition matrix <code>C</code> for <code>p&gt;0</code>.</p>
<p>By constuction, the matrix <code>C</code> is stochastic – i.e.
<span class="math inline">\(\mathbf{1}^T \cdot A \cdot \mathbf{e}_j = 1\)</span> for each <span class="math inline">\(j\)</span>.</p>
<p>Since <code>p&gt;0</code>, there is a link between every two nodes of the diagram
with positive probability. This shows both that the diagram is
strongly connected (there is a path between any two nodes) and acyclic
(since there are cycles of length 1).</p>
<p>Thus the hypotheses of the Frobenius-Perron Theorem always hold, and
we can conclude that the damped transition matrix <code>C</code> has eigenvalue
<span class="math inline">\(\lambda = 1\)</span> with multiplicity 1, and every other eigenvalue <span class="math inline">\(\mu\)</span>
satisfies <span class="math inline">\(|\mu| &lt; 1\)</span>.</p>
<h1 id="computations-with-some-data."><strong>6</strong> Computations with some data.</h1>
<p>We use the following code to extract formatted data (<code>json</code>) from
a file.</p>
<p>The data file contains entries like</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>   <span class="ot">[</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>     <span class="fu">{</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>       <span class="dt">&quot;from&quot;</span><span class="fu">:</span> <span class="st">&quot;Blue Whale&quot;</span><span class="fu">,</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>       <span class="dt">&quot;to&quot;</span><span class="fu">:</span> <span class="st">&quot;Snail&quot;</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>     <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>     <span class="fu">{</span></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>       <span class="dt">&quot;from&quot;</span><span class="fu">:</span> <span class="st">&quot;Blue Whale&quot;</span><span class="fu">,</span></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>       <span class="dt">&quot;to&quot;</span><span class="fu">:</span> <span class="st">&quot;Alligator&quot;</span></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>     <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>    <span class="er">...</span></span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>   <span class="ot">]</span>	 </span></code></pre></div>
<p>From the visible data, we see that <code>Blue Whale</code>, <code>Snail</code>, and
<code>Alligator</code> are nodes (pages) and that there are links <code>[Blue Whale] -&gt; [Snail]</code> and <code>[Blue Whale] -&gt; [Alligator]</code>.</p>
<p>The function <code>adj_from_json</code> extracts data from the <code>json</code> file, and
returns a pair <code>(ll,A)</code> where</p>
<ul>
<li><code>ll</code> is a list of the node names defined in the <code>json</code> file</li>
<li><code>A</code> is the adjacency matrix determined by the directed graph
described by the <code>from</code>/<code>to</code> pairs.</li>
</ul>
<div class="sourceCode" id="cb14"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> json</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>float_formatter <span class="op">=</span> <span class="st">&quot;</span><span class="sc">{:.5f}</span><span class="st">&quot;</span>.<span class="bu">format</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>np.set_printoptions(formatter<span class="op">=</span>{<span class="st">'float_kind'</span>:float_formatter})</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> bv(it,items):</span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> np.array([<span class="fl">1.0</span> <span class="cf">if</span> i <span class="op">==</span> items.index(it)</span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>                     <span class="cf">else</span> <span class="fl">0.0</span> <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(items))])</span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a><span class="co">## &gt;&gt;&gt; bv(&quot;c&quot;,[&quot;a&quot;,&quot;b&quot;,&quot;c&quot;,&quot;d&quot;])</span></span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a><span class="co">## array([0.00000, 0.00000, 1.00000, 0.00000])</span></span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> adj_from_json(json_file):</span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a>  <span class="cf">with</span> <span class="bu">open</span>(json_file) <span class="im">as</span> f:</span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a>      adj_data <span class="op">=</span> json.load(f)</span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a>  <span class="bu">dict</span> <span class="op">=</span> {}</span>
<span id="cb14-18"><a href="#cb14-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-19"><a href="#cb14-19" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> i <span class="kw">in</span> adj_data:</span>
<span id="cb14-20"><a href="#cb14-20" aria-hidden="true" tabindex="-1"></a>      lfrom <span class="op">=</span> i[<span class="st">'from'</span>]</span>
<span id="cb14-21"><a href="#cb14-21" aria-hidden="true" tabindex="-1"></a>      lto   <span class="op">=</span> i[<span class="st">'to'</span>]</span>
<span id="cb14-22"><a href="#cb14-22" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> lfrom <span class="kw">in</span> <span class="bu">dict</span>.keys():</span>
<span id="cb14-23"><a href="#cb14-23" aria-hidden="true" tabindex="-1"></a>          <span class="bu">dict</span>[lfrom].add(lto)</span>
<span id="cb14-24"><a href="#cb14-24" aria-hidden="true" tabindex="-1"></a>      <span class="cf">else</span>:</span>
<span id="cb14-25"><a href="#cb14-25" aria-hidden="true" tabindex="-1"></a>          <span class="bu">dict</span>[lfrom] <span class="op">=</span> <span class="bu">set</span>()</span>
<span id="cb14-26"><a href="#cb14-26" aria-hidden="true" tabindex="-1"></a>          <span class="bu">dict</span>[lfrom].add(lto)</span>
<span id="cb14-27"><a href="#cb14-27" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> <span class="kw">not</span>(lto <span class="kw">in</span> <span class="bu">dict</span>.keys()):</span>
<span id="cb14-28"><a href="#cb14-28" aria-hidden="true" tabindex="-1"></a>          <span class="bu">dict</span>[lto] <span class="op">=</span> <span class="bu">set</span>()</span>
<span id="cb14-29"><a href="#cb14-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-30"><a href="#cb14-30" aria-hidden="true" tabindex="-1"></a>  sites <span class="op">=</span> <span class="bu">list</span>(<span class="bu">dict</span>.keys())</span>
<span id="cb14-31"><a href="#cb14-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-32"><a href="#cb14-32" aria-hidden="true" tabindex="-1"></a>  A <span class="op">=</span> np.array([<span class="bu">sum</span>([bv(l_to,sites) <span class="cf">for</span> l_to <span class="kw">in</span> <span class="bu">dict</span>[l_from]],</span>
<span id="cb14-33"><a href="#cb14-33" aria-hidden="true" tabindex="-1"></a>                    np.zeros(<span class="bu">len</span>(sites)))</span>
<span id="cb14-34"><a href="#cb14-34" aria-hidden="true" tabindex="-1"></a>                <span class="cf">for</span> l_from <span class="kw">in</span> sites]) </span>
<span id="cb14-35"><a href="#cb14-35" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> (sites, A)</span></code></pre></div>
<p>Let’s get the required data and make the corresponding damped transition matrix
for <code>p=0.8</code>.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co">## the argument you use will vary...</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>(ll,AA) <span class="op">=</span> adj_from_json(<span class="st">&quot;/home/george/Classes/2024-Sp-Math087/course-assets/code/MidRep2-data.json&quot;</span>)</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>CC <span class="op">=</span> make_transition(AA,p<span class="op">=</span><span class="fl">0.8</span>)</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>CC.shape</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a><span class="op">=&gt;</span></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>(<span class="dv">93</span>,<span class="dv">93</span>)</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a><span class="bu">len</span>(ll)</span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a><span class="op">=&gt;</span></span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a><span class="dv">93</span></span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a><span class="co"># inspect the first 10 page names...</span></span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a>ll[<span class="dv">0</span>:<span class="dv">10</span>]</span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a><span class="op">=&gt;</span></span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a>[<span class="st">'Blue Whale'</span>,</span>
<span id="cb15-17"><a href="#cb15-17" aria-hidden="true" tabindex="-1"></a> <span class="st">'Snail'</span>,</span>
<span id="cb15-18"><a href="#cb15-18" aria-hidden="true" tabindex="-1"></a> <span class="st">'Alligator'</span>,</span>
<span id="cb15-19"><a href="#cb15-19" aria-hidden="true" tabindex="-1"></a> <span class="st">'Lark'</span>,</span>
<span id="cb15-20"><a href="#cb15-20" aria-hidden="true" tabindex="-1"></a> <span class="st">'Fruit Bat'</span>,</span>
<span id="cb15-21"><a href="#cb15-21" aria-hidden="true" tabindex="-1"></a> <span class="st">'Gerbil'</span>,</span>
<span id="cb15-22"><a href="#cb15-22" aria-hidden="true" tabindex="-1"></a> <span class="st">'Hyena'</span>,</span>
<span id="cb15-23"><a href="#cb15-23" aria-hidden="true" tabindex="-1"></a> <span class="st">'Starfish'</span>,</span>
<span id="cb15-24"><a href="#cb15-24" aria-hidden="true" tabindex="-1"></a> <span class="st">'Carp'</span>,</span>
<span id="cb15-25"><a href="#cb15-25" aria-hidden="true" tabindex="-1"></a> <span class="st">'Bee'</span>]</span>
<span id="cb15-26"><a href="#cb15-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-27"><a href="#cb15-27" aria-hidden="true" tabindex="-1"></a>CC</span>
<span id="cb15-28"><a href="#cb15-28" aria-hidden="true" tabindex="-1"></a><span class="op">=&gt;</span></span>
<span id="cb15-29"><a href="#cb15-29" aria-hidden="true" tabindex="-1"></a>array([[<span class="fl">0.00860</span>, <span class="fl">0.01971</span>, <span class="fl">0.01660</span>, ..., <span class="fl">0.00860</span>, <span class="fl">0.00860</span>, <span class="fl">0.00860</span>],</span>
<span id="cb15-30"><a href="#cb15-30" aria-hidden="true" tabindex="-1"></a>       [<span class="fl">0.00860</span>, <span class="fl">0.00860</span>, <span class="fl">0.00860</span>, ..., <span class="fl">0.00860</span>, <span class="fl">0.00860</span>, <span class="fl">0.00860</span>],</span>
<span id="cb15-31"><a href="#cb15-31" aria-hidden="true" tabindex="-1"></a>       [<span class="fl">0.01769</span>, <span class="fl">0.00860</span>, <span class="fl">0.00860</span>, ..., <span class="fl">0.00860</span>, <span class="fl">0.00860</span>, <span class="fl">0.00860</span>],</span>
<span id="cb15-32"><a href="#cb15-32" aria-hidden="true" tabindex="-1"></a>       ...,</span>
<span id="cb15-33"><a href="#cb15-33" aria-hidden="true" tabindex="-1"></a>       [<span class="fl">0.00860</span>, <span class="fl">0.00860</span>, <span class="fl">0.00860</span>, ..., <span class="fl">0.00860</span>, <span class="fl">0.00860</span>, <span class="fl">0.00860</span>],</span>
<span id="cb15-34"><a href="#cb15-34" aria-hidden="true" tabindex="-1"></a>       [<span class="fl">0.00860</span>, <span class="fl">0.00860</span>, <span class="fl">0.00860</span>, ..., <span class="fl">0.00860</span>, <span class="fl">0.00860</span>, <span class="fl">0.00860</span>],</span>
<span id="cb15-35"><a href="#cb15-35" aria-hidden="true" tabindex="-1"></a>       [<span class="fl">0.00860</span>, <span class="fl">0.00860</span>, <span class="fl">0.00860</span>, ..., <span class="fl">0.00860</span>, <span class="fl">0.00860</span>, <span class="fl">0.00860</span>]])</span></code></pre></div>
<p>We see that there are 93 “<code>pages</code>” (apparently named after various
animals).</p>
<p>Let’s find the eigenvectors and eigenvalues of the damped transition
matrix <code>CC</code>.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>ccvals,ccvecs <span class="op">=</span> np.linalg.eig(CC)</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="co">## inspect the eigenvalues</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>ccvals </span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a><span class="op">=&gt;</span></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>ccvals,ccvecs <span class="op">=</span> np.linalg.eig(CC)</span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>ccvals</span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>array([ <span class="fl">1.00000000e+00</span><span class="op">+</span><span class="ot">0.j</span>        ,  <span class="fl">5.81335370e-02</span><span class="op">+</span><span class="ot">0.09862851j</span>,</span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a>        <span class="fl">5.81335370e-02</span><span class="op">-</span><span class="ot">0.09862851j</span>,  <span class="fl">1.10155151e-01</span><span class="op">+</span><span class="ot">0.j</span>        ,</span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a>        <span class="fl">8.09646903e-02</span><span class="op">+</span><span class="ot">0.07090688j</span>,  <span class="fl">8.09646903e-02</span><span class="op">-</span><span class="ot">0.07090688j</span>,</span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a>        <span class="fl">9.32008734e-02</span><span class="op">+</span><span class="ot">0.04660742j</span>,  <span class="fl">9.32008734e-02</span><span class="op">-</span><span class="ot">0.04660742j</span>,</span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a>       <span class="op">-</span><span class="fl">1.14948480e-01</span><span class="op">+</span><span class="ot">0.j</span>        , <span class="op">-</span><span class="fl">1.06389167e-01</span><span class="op">+</span><span class="ot">0.j</span>        ,</span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a>        <span class="fl">2.89649299e-02</span><span class="op">+</span><span class="ot">0.09979826j</span>,  <span class="fl">2.89649299e-02</span><span class="op">-</span><span class="ot">0.09979826j</span>,</span>
<span id="cb16-15"><a href="#cb16-15" aria-hidden="true" tabindex="-1"></a>       <span class="op">-</span><span class="fl">1.56819457e-02</span><span class="op">+</span><span class="ot">0.10588806j</span>, <span class="op">-</span><span class="fl">1.56819457e-02</span><span class="op">-</span><span class="ot">0.10588806j</span>,</span>
<span id="cb16-16"><a href="#cb16-16" aria-hidden="true" tabindex="-1"></a>        <span class="fl">9.93204040e-02</span><span class="op">+</span><span class="ot">0.01613876j</span>,  <span class="fl">9.93204040e-02</span><span class="op">-</span><span class="ot">0.01613876j</span>,</span>
<span id="cb16-17"><a href="#cb16-17" aria-hidden="true" tabindex="-1"></a>       <span class="op">-</span><span class="fl">1.00611645e-01</span><span class="op">+</span><span class="ot">0.04570818j</span>, <span class="op">-</span><span class="fl">1.00611645e-01</span><span class="op">-</span><span class="ot">0.04570818j</span>,</span>
<span id="cb16-18"><a href="#cb16-18" aria-hidden="true" tabindex="-1"></a>        <span class="fl">6.89643622e-03</span><span class="op">+</span><span class="ot">0.1030294j</span> ,  <span class="fl">6.89643622e-03</span><span class="op">-</span><span class="ot">0.1030294j</span> ,</span>
<span id="cb16-19"><a href="#cb16-19" aria-hidden="true" tabindex="-1"></a>       <span class="op">-</span><span class="fl">7.94183273e-02</span><span class="op">+</span><span class="ot">0.07085312j</span>, <span class="op">-</span><span class="fl">7.94183273e-02</span><span class="op">-</span><span class="ot">0.07085312j</span>,</span>
<span id="cb16-20"><a href="#cb16-20" aria-hidden="true" tabindex="-1"></a>        <span class="fl">4.86905798e-02</span><span class="op">+</span><span class="ot">0.0823792j</span> ,  <span class="fl">4.86905798e-02</span><span class="op">-</span><span class="ot">0.0823792j</span> ,</span>
<span id="cb16-21"><a href="#cb16-21" aria-hidden="true" tabindex="-1"></a>        <span class="fl">9.42368093e-02</span><span class="op">+</span><span class="ot">0.00672646j</span>,  <span class="fl">9.42368093e-02</span><span class="op">-</span><span class="ot">0.00672646j</span>,</span>
<span id="cb16-22"><a href="#cb16-22" aria-hidden="true" tabindex="-1"></a>       <span class="op">-</span><span class="fl">1.01089822e-01</span><span class="op">+</span><span class="ot">0.03183306j</span>, <span class="op">-</span><span class="fl">1.01089822e-01</span><span class="op">-</span><span class="ot">0.03183306j</span>,</span>
<span id="cb16-23"><a href="#cb16-23" aria-hidden="true" tabindex="-1"></a>       <span class="op">-</span><span class="fl">1.31544158e-02</span><span class="op">+</span><span class="ot">0.09723973j</span>, <span class="op">-</span><span class="fl">1.31544158e-02</span><span class="op">-</span><span class="ot">0.09723973j</span>,</span>
<span id="cb16-24"><a href="#cb16-24" aria-hidden="true" tabindex="-1"></a>        <span class="fl">8.21566725e-02</span><span class="op">+</span><span class="ot">0.03741955j</span>,  <span class="fl">8.21566725e-02</span><span class="op">-</span><span class="ot">0.03741955j</span>,</span>
<span id="cb16-25"><a href="#cb16-25" aria-hidden="true" tabindex="-1"></a>       <span class="op">-</span><span class="fl">7.54377898e-02</span><span class="op">+</span><span class="ot">0.06346874j</span>, <span class="op">-</span><span class="fl">7.54377898e-02</span><span class="op">-</span><span class="ot">0.06346874j</span>,</span>
<span id="cb16-26"><a href="#cb16-26" aria-hidden="true" tabindex="-1"></a>        <span class="fl">4.38950297e-03</span><span class="op">+</span><span class="ot">0.08976249j</span>,  <span class="fl">4.38950297e-03</span><span class="op">-</span><span class="ot">0.08976249j</span>,</span>
<span id="cb16-27"><a href="#cb16-27" aria-hidden="true" tabindex="-1"></a>       <span class="op">-</span><span class="fl">8.59004198e-02</span><span class="op">+</span><span class="ot">0.03558716j</span>, <span class="op">-</span><span class="fl">8.59004198e-02</span><span class="op">-</span><span class="ot">0.03558716j</span>,</span>
<span id="cb16-28"><a href="#cb16-28" aria-hidden="true" tabindex="-1"></a>       <span class="op">-</span><span class="fl">2.78005174e-02</span><span class="op">+</span><span class="ot">0.07997022j</span>, <span class="op">-</span><span class="fl">2.78005174e-02</span><span class="op">-</span><span class="ot">0.07997022j</span>,</span>
<span id="cb16-29"><a href="#cb16-29" aria-hidden="true" tabindex="-1"></a>        <span class="fl">7.34876563e-02</span><span class="op">+</span><span class="ot">0.02449853j</span>,  <span class="fl">7.34876563e-02</span><span class="op">-</span><span class="ot">0.02449853j</span>,</span>
<span id="cb16-30"><a href="#cb16-30" aria-hidden="true" tabindex="-1"></a>       <span class="op">-</span><span class="fl">6.98170161e-02</span><span class="op">+</span><span class="ot">0.04486211j</span>, <span class="op">-</span><span class="fl">6.98170161e-02</span><span class="op">-</span><span class="ot">0.04486211j</span>,</span>
<span id="cb16-31"><a href="#cb16-31" aria-hidden="true" tabindex="-1"></a>       <span class="op">-</span><span class="fl">5.14204833e-02</span><span class="op">+</span><span class="ot">0.06215736j</span>, <span class="op">-</span><span class="fl">5.14204833e-02</span><span class="op">-</span><span class="ot">0.06215736j</span>,</span>
<span id="cb16-32"><a href="#cb16-32" aria-hidden="true" tabindex="-1"></a>        <span class="fl">3.88711135e-02</span><span class="op">+</span><span class="ot">0.05850915j</span>,  <span class="fl">3.88711135e-02</span><span class="op">-</span><span class="ot">0.05850915j</span>,</span>
<span id="cb16-33"><a href="#cb16-33" aria-hidden="true" tabindex="-1"></a>       <span class="op">-</span><span class="fl">7.68717429e-02</span><span class="op">+</span><span class="ot">0.j</span>        ,  <span class="fl">7.17116206e-02</span><span class="op">+</span><span class="ot">0.j</span>        ,</span>
<span id="cb16-34"><a href="#cb16-34" aria-hidden="true" tabindex="-1"></a>       <span class="op">-</span><span class="fl">6.45147990e-02</span><span class="op">+</span><span class="ot">0.03444725j</span>, <span class="op">-</span><span class="fl">6.45147990e-02</span><span class="op">-</span><span class="ot">0.03444725j</span>,</span>
<span id="cb16-35"><a href="#cb16-35" aria-hidden="true" tabindex="-1"></a>       <span class="op">-</span><span class="fl">1.89286725e-02</span><span class="op">+</span><span class="ot">0.06732008j</span>, <span class="op">-</span><span class="fl">1.89286725e-02</span><span class="op">-</span><span class="ot">0.06732008j</span>,</span>
<span id="cb16-36"><a href="#cb16-36" aria-hidden="true" tabindex="-1"></a>        <span class="fl">1.69280918e-02</span><span class="op">+</span><span class="ot">0.06639025j</span>,  <span class="fl">1.69280918e-02</span><span class="op">-</span><span class="ot">0.06639025j</span>,</span>
<span id="cb16-37"><a href="#cb16-37" aria-hidden="true" tabindex="-1"></a>       <span class="op">-</span><span class="fl">2.93686414e-02</span><span class="op">+</span><span class="ot">0.0545441j</span> , <span class="op">-</span><span class="fl">2.93686414e-02</span><span class="op">-</span><span class="ot">0.0545441j</span> ,</span>
<span id="cb16-38"><a href="#cb16-38" aria-hidden="true" tabindex="-1"></a>        <span class="fl">5.33965743e-02</span><span class="op">+</span><span class="ot">0.02106016j</span>,  <span class="fl">5.33965743e-02</span><span class="op">-</span><span class="ot">0.02106016j</span>,</span>
<span id="cb16-39"><a href="#cb16-39" aria-hidden="true" tabindex="-1"></a>       <span class="op">-</span><span class="fl">6.05459242e-02</span><span class="op">+</span><span class="ot">0.00506888j</span>, <span class="op">-</span><span class="fl">6.05459242e-02</span><span class="op">-</span><span class="ot">0.00506888j</span>,</span>
<span id="cb16-40"><a href="#cb16-40" aria-hidden="true" tabindex="-1"></a>        <span class="fl">3.93599474e-02</span><span class="op">+</span><span class="ot">0.02347753j</span>,  <span class="fl">3.93599474e-02</span><span class="op">-</span><span class="ot">0.02347753j</span>,</span>
<span id="cb16-41"><a href="#cb16-41" aria-hidden="true" tabindex="-1"></a>        <span class="fl">1.63307675e-02</span><span class="op">+</span><span class="ot">0.04074528j</span>,  <span class="fl">1.63307675e-02</span><span class="op">-</span><span class="ot">0.04074528j</span>,</span>
<span id="cb16-42"><a href="#cb16-42" aria-hidden="true" tabindex="-1"></a>       <span class="op">-</span><span class="fl">1.02712318e-02</span><span class="op">+</span><span class="ot">0.04567562j</span>, <span class="op">-</span><span class="fl">1.02712318e-02</span><span class="op">-</span><span class="ot">0.04567562j</span>,</span>
<span id="cb16-43"><a href="#cb16-43" aria-hidden="true" tabindex="-1"></a>        <span class="fl">3.59265964e-02</span><span class="op">+</span><span class="ot">0.j</span>        ,  <span class="fl">3.33850803e-02</span><span class="op">+</span><span class="ot">0.01220985j</span>,</span>
<span id="cb16-44"><a href="#cb16-44" aria-hidden="true" tabindex="-1"></a>        <span class="fl">3.33850803e-02</span><span class="op">-</span><span class="ot">0.01220985j</span>, <span class="op">-</span><span class="fl">4.35751117e-02</span><span class="op">+</span><span class="ot">0.j</span>        ,</span>
<span id="cb16-45"><a href="#cb16-45" aria-hidden="true" tabindex="-1"></a>       <span class="op">-</span><span class="fl">3.30623894e-02</span><span class="op">+</span><span class="ot">0.02901733j</span>, <span class="op">-</span><span class="fl">3.30623894e-02</span><span class="op">-</span><span class="ot">0.02901733j</span>,</span>
<span id="cb16-46"><a href="#cb16-46" aria-hidden="true" tabindex="-1"></a>        <span class="fl">9.92635417e-03</span><span class="op">+</span><span class="ot">0.03167826j</span>,  <span class="fl">9.92635417e-03</span><span class="op">-</span><span class="ot">0.03167826j</span>,</span>
<span id="cb16-47"><a href="#cb16-47" aria-hidden="true" tabindex="-1"></a>       <span class="op">-</span><span class="fl">4.09327636e-02</span><span class="op">+</span><span class="ot">0.j</span>        , <span class="op">-</span><span class="fl">5.32715066e-03</span><span class="op">+</span><span class="ot">0.03070314j</span>,</span>
<span id="cb16-48"><a href="#cb16-48" aria-hidden="true" tabindex="-1"></a>       <span class="op">-</span><span class="fl">5.32715066e-03</span><span class="op">-</span><span class="ot">0.03070314j</span>,  <span class="fl">2.14813671e-02</span><span class="op">+</span><span class="ot">0.j</span>        ,</span>
<span id="cb16-49"><a href="#cb16-49" aria-hidden="true" tabindex="-1"></a>       <span class="op">-</span><span class="fl">2.82100528e-02</span><span class="op">+</span><span class="ot">0.01202141j</span>, <span class="op">-</span><span class="fl">2.82100528e-02</span><span class="op">-</span><span class="ot">0.01202141j</span>,</span>
<span id="cb16-50"><a href="#cb16-50" aria-hidden="true" tabindex="-1"></a>        <span class="fl">1.83637684e-03</span><span class="op">+</span><span class="ot">0.01947041j</span>,  <span class="fl">1.83637684e-03</span><span class="op">-</span><span class="ot">0.01947041j</span>,</span>
<span id="cb16-51"><a href="#cb16-51" aria-hidden="true" tabindex="-1"></a>       <span class="op">-</span><span class="fl">1.62627983e-02</span><span class="op">+</span><span class="ot">0.01669296j</span>, <span class="op">-</span><span class="fl">1.62627983e-02</span><span class="op">-</span><span class="ot">0.01669296j</span>,</span>
<span id="cb16-52"><a href="#cb16-52" aria-hidden="true" tabindex="-1"></a>       <span class="op">-</span><span class="fl">1.85868871e-02</span><span class="op">+</span><span class="ot">0.j</span>        , <span class="op">-</span><span class="fl">7.80292050e-03</span><span class="op">+</span><span class="ot">0.01073254j</span>,</span>
<span id="cb16-53"><a href="#cb16-53" aria-hidden="true" tabindex="-1"></a>       <span class="op">-</span><span class="fl">7.80292050e-03</span><span class="op">-</span><span class="ot">0.01073254j</span>, <span class="op">-</span><span class="fl">3.21783933e-03</span><span class="op">+</span><span class="ot">0.j</span>        ,</span>
<span id="cb16-54"><a href="#cb16-54" aria-hidden="true" tabindex="-1"></a>        <span class="fl">1.63520244e-17</span><span class="op">+</span><span class="ot">0.j</span>        , <span class="op">-</span><span class="fl">5.55607577e-17</span><span class="op">+</span><span class="ot">0.j</span>        ,</span>
<span id="cb16-55"><a href="#cb16-55" aria-hidden="true" tabindex="-1"></a>        <span class="fl">2.92028556e-17</span><span class="op">+</span><span class="ot">0.j</span>        ])</span></code></pre></div>
<p>It seems reasonably clear that 1 appears only once and all other
eigenvalues have absolute value &lt; 1, but for an even longer list this
would be clumsier. We can use <code>numpy</code> tools to confirm this, though, as follows:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>accvals <span class="op">=</span> np.<span class="bu">abs</span>(ccvals)    <span class="co">## compute the absolute value of each eigenvalue and store the result in a list</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>accvals.sort()              <span class="co">## sort the list of absolute values</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>accvals                     <span class="co">## inspect the sorted list</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a><span class="op">=&gt;</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>array([<span class="fl">0.00000</span>, <span class="fl">0.00000</span>, <span class="fl">0.00000</span>, <span class="fl">0.00322</span>, <span class="fl">0.01327</span>, <span class="fl">0.01327</span>, <span class="fl">0.01859</span>,</span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>       <span class="fl">0.01956</span>, <span class="fl">0.01956</span>, <span class="fl">0.02148</span>, <span class="fl">0.02331</span>, <span class="fl">0.02331</span>, <span class="fl">0.03066</span>, <span class="fl">0.03066</span>,</span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>       <span class="fl">0.03116</span>, <span class="fl">0.03116</span>, <span class="fl">0.03320</span>, <span class="fl">0.03320</span>, <span class="fl">0.03555</span>, <span class="fl">0.03555</span>, <span class="fl">0.03593</span>,</span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>       <span class="fl">0.04093</span>, <span class="fl">0.04358</span>, <span class="fl">0.04390</span>, <span class="fl">0.04390</span>, <span class="fl">0.04399</span>, <span class="fl">0.04399</span>, <span class="fl">0.04583</span>,</span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a>       <span class="fl">0.04583</span>, <span class="fl">0.04682</span>, <span class="fl">0.04682</span>, <span class="fl">0.05740</span>, <span class="fl">0.05740</span>, <span class="fl">0.06076</span>, <span class="fl">0.06076</span>,</span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a>       <span class="fl">0.06195</span>, <span class="fl">0.06195</span>, <span class="fl">0.06851</span>, <span class="fl">0.06851</span>, <span class="fl">0.06993</span>, <span class="fl">0.06993</span>, <span class="fl">0.07024</span>,</span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a>       <span class="fl">0.07024</span>, <span class="fl">0.07171</span>, <span class="fl">0.07314</span>, <span class="fl">0.07314</span>, <span class="fl">0.07687</span>, <span class="fl">0.07746</span>, <span class="fl">0.07746</span>,</span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a>       <span class="fl">0.08067</span>, <span class="fl">0.08067</span>, <span class="fl">0.08299</span>, <span class="fl">0.08299</span>, <span class="fl">0.08466</span>, <span class="fl">0.08466</span>, <span class="fl">0.08987</span>,</span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a>       <span class="fl">0.08987</span>, <span class="fl">0.09028</span>, <span class="fl">0.09028</span>, <span class="fl">0.09298</span>, <span class="fl">0.09298</span>, <span class="fl">0.09448</span>, <span class="fl">0.09448</span>,</span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a>       <span class="fl">0.09569</span>, <span class="fl">0.09569</span>, <span class="fl">0.09813</span>, <span class="fl">0.09813</span>, <span class="fl">0.09859</span>, <span class="fl">0.09859</span>, <span class="fl">0.10062</span>,</span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a>       <span class="fl">0.10062</span>, <span class="fl">0.10326</span>, <span class="fl">0.10326</span>, <span class="fl">0.10392</span>, <span class="fl">0.10392</span>, <span class="fl">0.10420</span>, <span class="fl">0.10420</span>,</span>
<span id="cb17-16"><a href="#cb17-16" aria-hidden="true" tabindex="-1"></a>       <span class="fl">0.10598</span>, <span class="fl">0.10598</span>, <span class="fl">0.10639</span>, <span class="fl">0.10643</span>, <span class="fl">0.10643</span>, <span class="fl">0.10704</span>, <span class="fl">0.10704</span>,</span>
<span id="cb17-17"><a href="#cb17-17" aria-hidden="true" tabindex="-1"></a>       <span class="fl">0.10762</span>, <span class="fl">0.10762</span>, <span class="fl">0.11016</span>, <span class="fl">0.11051</span>, <span class="fl">0.11051</span>, <span class="fl">0.11449</span>, <span class="fl">0.11449</span>,</span>
<span id="cb17-18"><a href="#cb17-18" aria-hidden="true" tabindex="-1"></a>       <span class="fl">0.11495</span>, <span class="fl">1.00000</span>])</span></code></pre></div>
<p>Now we see with certainty that there is only one eigenvalue equal to
1, and all others have absolute value <code>&lt; 1</code>.</p>
<p>Moreover, the 1-eigenvector is the first column of <code>ccvecs</code>. Normalizing
this eigenvector gives us the long-term probabilities for the pages.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>animal_page_probabilities <span class="op">=</span> normalize(ccvecs[:,<span class="dv">0</span>])</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>animal_page_probabilities</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a><span class="op">=&gt;</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>array([<span class="fl">0.01354</span>, <span class="fl">0.01062</span>, <span class="fl">0.01035</span>, <span class="fl">0.01104</span>, <span class="fl">0.01052</span>, <span class="fl">0.01188</span>, <span class="fl">0.01002</span>,</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>       <span class="fl">0.01031</span>, <span class="fl">0.01183</span>, <span class="fl">0.01022</span>, <span class="fl">0.01012</span>, <span class="fl">0.01007</span>, <span class="fl">0.00988</span>, <span class="fl">0.01015</span>,</span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>       <span class="fl">0.01010</span>, <span class="fl">0.01080</span>, <span class="fl">0.01159</span>, <span class="fl">0.01011</span>, <span class="fl">0.01061</span>, <span class="fl">0.01040</span>, <span class="fl">0.01035</span>,</span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>       <span class="fl">0.01061</span>, <span class="fl">0.01027</span>, <span class="fl">0.01070</span>, <span class="fl">0.00984</span>, <span class="fl">0.01156</span>, <span class="fl">0.01083</span>, <span class="fl">0.01148</span>,</span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>       <span class="fl">0.01043</span>, <span class="fl">0.01071</span>, <span class="fl">0.01045</span>, <span class="fl">0.01052</span>, <span class="fl">0.00997</span>, <span class="fl">0.01191</span>, <span class="fl">0.01271</span>,</span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>       <span class="fl">0.01016</span>, <span class="fl">0.01172</span>, <span class="fl">0.00999</span>, <span class="fl">0.01046</span>, <span class="fl">0.01070</span>, <span class="fl">0.01161</span>, <span class="fl">0.01093</span>,</span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>       <span class="fl">0.00986</span>, <span class="fl">0.01069</span>, <span class="fl">0.01132</span>, <span class="fl">0.01045</span>, <span class="fl">0.01029</span>, <span class="fl">0.01021</span>, <span class="fl">0.01145</span>,</span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a>       <span class="fl">0.01062</span>, <span class="fl">0.01182</span>, <span class="fl">0.01063</span>, <span class="fl">0.01082</span>, <span class="fl">0.01098</span>, <span class="fl">0.01075</span>, <span class="fl">0.01067</span>,</span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a>       <span class="fl">0.01064</span>, <span class="fl">0.01160</span>, <span class="fl">0.01022</span>, <span class="fl">0.01062</span>, <span class="fl">0.01058</span>, <span class="fl">0.01053</span>, <span class="fl">0.01010</span>,</span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a>       <span class="fl">0.00995</span>, <span class="fl">0.01059</span>, <span class="fl">0.01013</span>, <span class="fl">0.01309</span>, <span class="fl">0.01059</span>, <span class="fl">0.01032</span>, <span class="fl">0.00996</span>,</span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a>       <span class="fl">0.01215</span>, <span class="fl">0.01044</span>, <span class="fl">0.00998</span>, <span class="fl">0.01127</span>, <span class="fl">0.01005</span>, <span class="fl">0.01104</span>, <span class="fl">0.01076</span>,</span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a>       <span class="fl">0.01202</span>, <span class="fl">0.01077</span>, <span class="fl">0.01101</span>, <span class="fl">0.00996</span>, <span class="fl">0.01084</span>, <span class="fl">0.01042</span>, <span class="fl">0.01050</span>,</span>
<span id="cb18-16"><a href="#cb18-16" aria-hidden="true" tabindex="-1"></a>       <span class="fl">0.01082</span>, <span class="fl">0.01053</span>, <span class="fl">0.01013</span>, <span class="fl">0.01205</span>, <span class="fl">0.01052</span>, <span class="fl">0.01176</span>, <span class="fl">0.01050</span>,</span>
<span id="cb18-17"><a href="#cb18-17" aria-hidden="true" tabindex="-1"></a>       <span class="fl">0.01060</span>, <span class="fl">0.01033</span>])</span></code></pre></div>
<p>Let’s use the probabilities to report the top 10 pages.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>animal_rank <span class="op">=</span> [ (ll[i],animal_page_probabilities[i]) <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(ll)) ]</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a><span class="co">## animal_rank now contains pairs ( animal name, probability )</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a><span class="co">## let's inspect the first 10</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>animal_rank[<span class="dv">0</span>:<span class="dv">10</span>]</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a><span class="op">=&gt;</span></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>[(<span class="st">'Blue Whale'</span>, <span class="fl">0.013536168250393851</span>),</span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a> (<span class="st">'Snail'</span>, <span class="fl">0.01061748386858462</span>),</span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a> (<span class="st">'Alligator'</span>, <span class="fl">0.010350920780631163</span>),</span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a> (<span class="st">'Lark'</span>, <span class="fl">0.011041130183901918</span>),</span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a> (<span class="st">'Fruit Bat'</span>, <span class="fl">0.01052325910687038</span>),</span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a> (<span class="st">'Gerbil'</span>, <span class="fl">0.01188468617792059</span>),</span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a> (<span class="st">'Hyena'</span>, <span class="fl">0.01002245061258836</span>),</span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a> (<span class="st">'Starfish'</span>, <span class="fl">0.010314486898227157</span>),</span>
<span id="cb19-15"><a href="#cb19-15" aria-hidden="true" tabindex="-1"></a> (<span class="st">'Carp'</span>, <span class="fl">0.011826666513123014</span>),</span>
<span id="cb19-16"><a href="#cb19-16" aria-hidden="true" tabindex="-1"></a> (<span class="st">'Bee'</span>, <span class="fl">0.010215924772345095</span>)]</span></code></pre></div>
<p>Now <em>sorting</em> the list <code>animal_rank</code> in descending order using the
probability entry as the key for the sort, we find the top 10 pages</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>animal_rank.sort(key<span class="op">=</span> <span class="kw">lambda</span> x: <span class="op">-</span>x[<span class="dv">1</span>])</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>animal_rank[<span class="dv">0</span>:<span class="dv">10</span>]</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a><span class="op">=&gt;</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>[(<span class="st">'Blue Whale'</span>, <span class="fl">0.013536168250393851</span>),</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a> (<span class="st">'Ant'</span>, <span class="fl">0.013085585380475655</span>),</span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a> (<span class="st">'Donkey'</span>, <span class="fl">0.012713237966476582</span>),</span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a> (<span class="st">'Squirrel'</span>, <span class="fl">0.012151346209255502</span>),</span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a> (<span class="st">'Rook'</span>, <span class="fl">0.01204650009799565</span>),</span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a> (<span class="st">'Grouse'</span>, <span class="fl">0.012020480385893456</span>),</span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a> (<span class="st">'Fowl'</span>, <span class="fl">0.01190910776280802</span>),</span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a> (<span class="st">'Gerbil'</span>, <span class="fl">0.01188468617792059</span>),</span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a> (<span class="st">'Carp'</span>, <span class="fl">0.011826666513123014</span>),</span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true" tabindex="-1"></a> (<span class="st">'Albatross'</span>, <span class="fl">0.011817909284220714</span>)]</span></code></pre></div>
<p>We can automate extracting the top 10 with a function</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> extracttop10(ll,AA,p):</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>  <span class="co">## make the transition matrix from the given adjacency matrix  </span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>  CC<span class="op">=</span>make_transition(AA,p)</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>  <span class="co">## get the eigenvalues and eigenvectors of CC</span></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>  evals,evecs <span class="op">=</span> np.linalg.eig(CC)</span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>  <span class="co">## find the index of the eigenvalue 1.</span></span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>  i <span class="op">=</span> [ i <span class="cf">if</span> <span class="bu">abs</span>(evals[i] <span class="op">-</span> <span class="dv">1</span>)<span class="op">&lt;</span> <span class="fl">1e-4</span> <span class="cf">else</span> <span class="va">None</span> <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(evals)) ][<span class="dv">0</span>]  </span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a>  <span class="co">## get the normalized eigenvectors for eigenvalue 1</span></span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a>  animal_page_probabilities <span class="op">=</span> normalize(evecs[:,i])</span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true" tabindex="-1"></a>  <span class="co">## sort the pairs ( page, page-probability)</span></span>
<span id="cb21-15"><a href="#cb21-15" aria-hidden="true" tabindex="-1"></a>  animal_rank <span class="op">=</span>  [ (ll[i],animal_page_probabilities[i]) <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(ll)) ]</span>
<span id="cb21-16"><a href="#cb21-16" aria-hidden="true" tabindex="-1"></a>  animal_rank.sort(key<span class="op">=</span><span class="kw">lambda</span> x: <span class="op">-</span>x[<span class="dv">1</span>])</span>
<span id="cb21-17"><a href="#cb21-17" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb21-18"><a href="#cb21-18" aria-hidden="true" tabindex="-1"></a>  <span class="co">## and return the top 10</span></span>
<span id="cb21-19"><a href="#cb21-19" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> animal_rank[<span class="dv">0</span>:<span class="dv">10</span>]</span></code></pre></div>
<p>Now we can see the effects of changing the damping probabilty <code>p</code>:</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> p <span class="kw">in</span> [<span class="fl">.8</span> <span class="op">-</span> <span class="fl">.1</span><span class="op">*</span>i <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">5</span>)]:</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f&quot;p = </span><span class="sc">{</span>p<span class="sc">:.1}</span><span class="ss">&quot;</span>)</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> z <span class="kw">in</span> extracttop10(ll,AA,p):</span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(z)</span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">&quot;---&quot;</span>)</span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a><span class="op">=&gt;</span></span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>p <span class="op">=</span> <span class="fl">0.8</span></span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>(<span class="st">'Blue Whale'</span>, <span class="fl">0.013536168250393851</span>)</span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a>(<span class="st">'Ant'</span>, <span class="fl">0.013085585380475655</span>)</span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a>(<span class="st">'Donkey'</span>, <span class="fl">0.012713237966476582</span>)</span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a>(<span class="st">'Squirrel'</span>, <span class="fl">0.012151346209255502</span>)</span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a>(<span class="st">'Rook'</span>, <span class="fl">0.01204650009799565</span>)</span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a>(<span class="st">'Grouse'</span>, <span class="fl">0.012020480385893456</span>)</span>
<span id="cb22-14"><a href="#cb22-14" aria-hidden="true" tabindex="-1"></a>(<span class="st">'Fowl'</span>, <span class="fl">0.01190910776280802</span>)</span>
<span id="cb22-15"><a href="#cb22-15" aria-hidden="true" tabindex="-1"></a>(<span class="st">'Gerbil'</span>, <span class="fl">0.01188468617792059</span>)</span>
<span id="cb22-16"><a href="#cb22-16" aria-hidden="true" tabindex="-1"></a>(<span class="st">'Carp'</span>, <span class="fl">0.011826666513123014</span>)</span>
<span id="cb22-17"><a href="#cb22-17" aria-hidden="true" tabindex="-1"></a>(<span class="st">'Albatross'</span>, <span class="fl">0.011817909284220714</span>)</span>
<span id="cb22-18"><a href="#cb22-18" aria-hidden="true" tabindex="-1"></a><span class="op">---</span></span>
<span id="cb22-19"><a href="#cb22-19" aria-hidden="true" tabindex="-1"></a>p <span class="op">=</span> <span class="fl">0.7</span></span>
<span id="cb22-20"><a href="#cb22-20" aria-hidden="true" tabindex="-1"></a>(<span class="st">'Blue Whale'</span>, <span class="fl">0.015018877810741557</span>)</span>
<span id="cb22-21"><a href="#cb22-21" aria-hidden="true" tabindex="-1"></a>(<span class="st">'Ant'</span>, <span class="fl">0.014163959071792166</span>)</span>
<span id="cb22-22"><a href="#cb22-22" aria-hidden="true" tabindex="-1"></a>(<span class="st">'Donkey'</span>, <span class="fl">0.013673571422727786</span>)</span>
<span id="cb22-23"><a href="#cb22-23" aria-hidden="true" tabindex="-1"></a>(<span class="st">'Rook'</span>, <span class="fl">0.012867462131640901</span>)</span>
<span id="cb22-24"><a href="#cb22-24" aria-hidden="true" tabindex="-1"></a>(<span class="st">'Squirrel'</span>, <span class="fl">0.012761305271685017</span>)</span>
<span id="cb22-25"><a href="#cb22-25" aria-hidden="true" tabindex="-1"></a>(<span class="st">'Grouse'</span>, <span class="fl">0.012635398897967906</span>)</span>
<span id="cb22-26"><a href="#cb22-26" aria-hidden="true" tabindex="-1"></a>(<span class="st">'Fowl'</span>, <span class="fl">0.012583401286290251</span>)</span>
<span id="cb22-27"><a href="#cb22-27" aria-hidden="true" tabindex="-1"></a>(<span class="st">'Gerbil'</span>, <span class="fl">0.012550152776914202</span>)</span>
<span id="cb22-28"><a href="#cb22-28" aria-hidden="true" tabindex="-1"></a>(<span class="st">'Carp'</span>, <span class="fl">0.012463458881175884</span>)</span>
<span id="cb22-29"><a href="#cb22-29" aria-hidden="true" tabindex="-1"></a>(<span class="st">'Albatross'</span>, <span class="fl">0.012442794858579156</span>)</span>
<span id="cb22-30"><a href="#cb22-30" aria-hidden="true" tabindex="-1"></a><span class="op">---</span></span>
<span id="cb22-31"><a href="#cb22-31" aria-hidden="true" tabindex="-1"></a>p <span class="op">=</span> <span class="fl">0.6</span></span>
<span id="cb22-32"><a href="#cb22-32" aria-hidden="true" tabindex="-1"></a>(<span class="st">'Blue Whale'</span>, <span class="fl">0.01658597753383941</span>)</span>
<span id="cb22-33"><a href="#cb22-33" aria-hidden="true" tabindex="-1"></a>(<span class="st">'Ant'</span>, <span class="fl">0.015224920770049603</span>)</span>
<span id="cb22-34"><a href="#cb22-34" aria-hidden="true" tabindex="-1"></a>(<span class="st">'Donkey'</span>, <span class="fl">0.014627840325647233</span>)</span>
<span id="cb22-35"><a href="#cb22-35" aria-hidden="true" tabindex="-1"></a>(<span class="st">'Rook'</span>, <span class="fl">0.013777791946367293</span>)</span>
<span id="cb22-36"><a href="#cb22-36" aria-hidden="true" tabindex="-1"></a>(<span class="st">'Squirrel'</span>, <span class="fl">0.01330961897031871</span>)</span>
<span id="cb22-37"><a href="#cb22-37" aria-hidden="true" tabindex="-1"></a>(<span class="st">'Fowl'</span>, <span class="fl">0.01328679220977628</span>)</span>
<span id="cb22-38"><a href="#cb22-38" aria-hidden="true" tabindex="-1"></a>(<span class="st">'Gerbil'</span>, <span class="fl">0.013267952762531062</span>)</span>
<span id="cb22-39"><a href="#cb22-39" aria-hidden="true" tabindex="-1"></a>(<span class="st">'Grouse'</span>, <span class="fl">0.013248162718688948</span>)</span>
<span id="cb22-40"><a href="#cb22-40" aria-hidden="true" tabindex="-1"></a>(<span class="st">'Carp'</span>, <span class="fl">0.01316067379637</span>)</span>
<span id="cb22-41"><a href="#cb22-41" aria-hidden="true" tabindex="-1"></a>(<span class="st">'Albatross'</span>, <span class="fl">0.013144879993912102</span>)</span>
<span id="cb22-42"><a href="#cb22-42" aria-hidden="true" tabindex="-1"></a><span class="op">---</span></span>
<span id="cb22-43"><a href="#cb22-43" aria-hidden="true" tabindex="-1"></a>p <span class="op">=</span> <span class="fl">0.5</span></span>
<span id="cb22-44"><a href="#cb22-44" aria-hidden="true" tabindex="-1"></a>(<span class="st">'Blue Whale'</span>, <span class="fl">0.01825176753025187</span>)</span>
<span id="cb22-45"><a href="#cb22-45" aria-hidden="true" tabindex="-1"></a>(<span class="st">'Ant'</span>, <span class="fl">0.016300312179253696</span>)</span>
<span id="cb22-46"><a href="#cb22-46" aria-hidden="true" tabindex="-1"></a>(<span class="st">'Donkey'</span>, <span class="fl">0.015582741824297787</span>)</span>
<span id="cb22-47"><a href="#cb22-47" aria-hidden="true" tabindex="-1"></a>(<span class="st">'Rook'</span>, <span class="fl">0.014757533023902241</span>)</span>
<span id="cb22-48"><a href="#cb22-48" aria-hidden="true" tabindex="-1"></a>(<span class="st">'Gerbil'</span>, <span class="fl">0.014028343256687453</span>)</span>
<span id="cb22-49"><a href="#cb22-49" aria-hidden="true" tabindex="-1"></a>(<span class="st">'Fowl'</span>, <span class="fl">0.013994274892283045</span>)</span>
<span id="cb22-50"><a href="#cb22-50" aria-hidden="true" tabindex="-1"></a>(<span class="st">'Albatross'</span>, <span class="fl">0.013933485760208744</span>)</span>
<span id="cb22-51"><a href="#cb22-51" aria-hidden="true" tabindex="-1"></a>(<span class="st">'Carp'</span>, <span class="fl">0.013913511207356382</span>)</span>
<span id="cb22-52"><a href="#cb22-52" aria-hidden="true" tabindex="-1"></a>(<span class="st">'Grouse'</span>, <span class="fl">0.013868311371992712</span>)</span>
<span id="cb22-53"><a href="#cb22-53" aria-hidden="true" tabindex="-1"></a>(<span class="st">'Squirrel'</span>, <span class="fl">0.013794207834994613</span>)</span>
<span id="cb22-54"><a href="#cb22-54" aria-hidden="true" tabindex="-1"></a><span class="op">---</span></span>
<span id="cb22-55"><a href="#cb22-55" aria-hidden="true" tabindex="-1"></a>p <span class="op">=</span> <span class="fl">0.4</span></span>
<span id="cb22-56"><a href="#cb22-56" aria-hidden="true" tabindex="-1"></a>(<span class="st">'Blue Whale'</span>, <span class="fl">0.020028169184583642</span>)</span>
<span id="cb22-57"><a href="#cb22-57" aria-hidden="true" tabindex="-1"></a>(<span class="st">'Ant'</span>, <span class="fl">0.017424975927025417</span>)</span>
<span id="cb22-58"><a href="#cb22-58" aria-hidden="true" tabindex="-1"></a>(<span class="st">'Donkey'</span>, <span class="fl">0.016544660161517538</span>)</span>
<span id="cb22-59"><a href="#cb22-59" aria-hidden="true" tabindex="-1"></a>(<span class="st">'Rook'</span>, <span class="fl">0.015786803069689003</span>)</span>
<span id="cb22-60"><a href="#cb22-60" aria-hidden="true" tabindex="-1"></a>(<span class="st">'Gerbil'</span>, <span class="fl">0.014822569897437046</span>)</span>
<span id="cb22-61"><a href="#cb22-61" aria-hidden="true" tabindex="-1"></a>(<span class="st">'Albatross'</span>, <span class="fl">0.014816272925140058</span>)</span>
<span id="cb22-62"><a href="#cb22-62" aria-hidden="true" tabindex="-1"></a>(<span class="st">'Carp'</span>, <span class="fl">0.014715684339538357</span>)</span>
<span id="cb22-63"><a href="#cb22-63" aria-hidden="true" tabindex="-1"></a>(<span class="st">'Fowl'</span>, <span class="fl">0.014683318629935478</span>)</span>
<span id="cb22-64"><a href="#cb22-64" aria-hidden="true" tabindex="-1"></a>(<span class="st">'Grouse'</span>, <span class="fl">0.01450549030548999</span>)</span>
<span id="cb22-65"><a href="#cb22-65" aria-hidden="true" tabindex="-1"></a>(<span class="st">'Squirrel'</span>, <span class="fl">0.01421295027975862</span>)</span>
<span id="cb22-66"><a href="#cb22-66" aria-hidden="true" tabindex="-1"></a><span class="op">---</span></span></code></pre></div>
<p>The first change in the top 10 ranking occurred when changing from
<code>p=0.8</code> to <code>p=0.7</code> (<code>Rook</code> and <code>Squirrel</code> change places), with
slightly more drastic changes for still smaller values of <code>p</code>.</p>
<h1 id="alternate-uses-for-pagerank"><strong>7</strong> Alternate uses for <code>PageRank</code>?</h1>
<p>We consider the following question:</p>
<blockquote>
<p>The damping probability <code>0 &lt; p ≤ 1</code> forces the <code>PageRank</code>
transition matrix to satisfy the conclusion of the Perron-Frobenius
Theorem. As we discussed above, from the point-of-view of ranking
web pages this quantity represents the probability that a random
web-surfer gets bored and makes a random new choice of sites. In
particular, this provides a reasonable <em>self-contained</em> explanation
for the use of this <code>PageRank</code> transition matrix.</p>
</blockquote>
<blockquote>
<p>On the other hand, one might hope to use the <code>PageRank</code> approach
to rank other “linked material”. For example, one might try to rank
published academic papers by citation.</p>
</blockquote>
<blockquote>
<p>Is this a reasonable proposal?</p>
</blockquote>
<p>Certainly the ranking task is similar, and using the damped transition
matrix is attractive since it “forces” the hypotheses of
Frobenius-Perron to be true, so that the 1-eigenvector describes the
long-term probabilities.</p>
<p>On the other hand, how well the damping model should apply in the
setting of academic papers is perhaps debatable – to what extent is
it reasonable to model use of academic papers randomly? Though perhaps
this debate comes down to “what should be the damping probability
<span class="math inline">\(p\)</span>?”</p>
        </main>

        <footer>
	  <nav>
	    <a href="http://www.tufts.edu">
	      <i class="fas fa-chalkboard"></i>
	      Tufts
	    </a>	    
	    <a href="http://math.tufts.edu">
	      <i class="fas fa-chalkboard-teacher"></i>
	      Tufts Math
	    </a>
	    <a href="https://gmcninch-tufts.github.io/math">
	      <i class="fas fa-coffee"></i>
	      G McNinch
	    </a>
	    <a href="https://github.com/gmcninch-tufts">
	      <i class="fab fa-github"></i>
	      GitHub
	    </a>	    
	  </nav>
        </footer>
    </body>
</html>
