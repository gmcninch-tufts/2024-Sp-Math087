<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Math87-Tufts University - Midterm Project 1 -- Supply chain *solutions*</title>
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-MML-AM_CHTML">
	</script>	
        <link rel="stylesheet" href="../css/default.css" />
	<link rel="stylesheet" href="../css/haddock.css" />
	
	<link href="https://fonts.googleapis.com/css?family=Lato:400,700" type="text/css" rel="stylesheet" media="screen" />
	<link href="https://fonts.googleapis.com/css?family=Arimo:400,700" type="text/css" rel="stylesheet" media="screen" />
	<link href="https://fonts.googleapis.com/css?family=Roboto:400,700" type="text/css" rel="stylesheet" media="screen" />
	<link href="https://fonts.googleapis.com/css?family=Inconsolata:400,700" type="text/css" rel="stylesheet" media="screen" />
	<link href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" type="text/css" rel="stylesheet" media="screen" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous" />			
    </head>
    <body>
        <header>
          <div class="logo">
            <a href="../">
	      Math87 - Spring 2024 - Tufts Univ</a>
          </div>
          <nav>
            <a href="../about.html">About</a>
	    <a href="../course-pages/Math087--course-info.html">Info</a>	    
            <a href="../archive.html">Archive</a>
          </nav>
        </header>

        <main role="main">
            <h1>Midterm Project 1 -- Supply chain *solutions*</h1>
            <p>(These “solutions” just provide a sketch and demonstrate some code; I
didn’t write a report…)</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> scipy.optimize <span class="im">import</span> linprog</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> math <span class="im">import</span> inf</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> itertools <span class="im">import</span> product</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>warehouse_cities <span class="op">=</span> [ <span class="st">'Santa Fe'</span>,</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>                     <span class="st">'El Paso'</span>,</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>                     <span class="st">'Tampa Bay'</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>                    ]</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>store_cities <span class="op">=</span> [ <span class="st">'Chicago'</span>,</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>                 <span class="st">'LA'</span>,</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>                 <span class="st">'NY'</span>,</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>                 <span class="st">'Houston'</span>,</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>                 <span class="st">'Atlanta'</span></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>                ]</span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>vertices<span class="op">=</span>[ <span class="st">'Source'</span>,</span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>           <span class="op">*</span>warehouse_cities,</span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>           <span class="op">*</span>store_cities,</span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a>           <span class="st">'Demand'</span></span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a>          ]</span></code></pre></div>
<div class="sourceCode" id="cb2"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>supplies <span class="op">=</span> { <span class="st">'Santa Fe'</span>: <span class="dv">700</span>,</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>             <span class="st">'El Paso'</span>: <span class="dv">200</span>,</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>             <span class="st">'Tampa Bay'</span>: <span class="dv">200</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>             }</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>demand <span class="op">=</span> { <span class="st">'Chicago'</span>: <span class="dv">200</span>,</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>           <span class="st">'LA'</span>: <span class="dv">200</span>,</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>           <span class="st">'NY'</span>: <span class="dv">250</span>,</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>           <span class="st">'Houston'</span>: <span class="dv">300</span>,</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>           <span class="st">'Atlanta'</span>: <span class="dv">150</span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>          }</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> ship_costs(f,t):</span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>    match (f,t):</span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> <span class="st">'Source'</span>,_:             <span class="co"># no shipping cost for &quot;shipments&quot; from source to warehouse</span></span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> <span class="dv">0</span></span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> _,<span class="st">'Demand'</span>:             <span class="co"># no shipping costs for &quot;shipments&quot; from store to customers</span></span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> <span class="dv">0</span></span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> <span class="st">'Santa Fe'</span>,<span class="st">'Chicago'</span>:</span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> <span class="dv">6</span></span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> <span class="st">'Santa Fe'</span>,<span class="st">'LA'</span>:</span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> <span class="dv">3</span></span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> <span class="st">'Santa Fe'</span>,<span class="st">'Houston'</span>:</span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> <span class="dv">3</span></span>
<span id="cb2-30"><a href="#cb2-30" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> <span class="st">'Santa Fe'</span>,<span class="st">'Atlanta'</span>:</span>
<span id="cb2-31"><a href="#cb2-31" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> <span class="dv">7</span></span>
<span id="cb2-32"><a href="#cb2-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-33"><a href="#cb2-33" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> <span class="st">'El Paso'</span>,<span class="st">'LA'</span>:</span>
<span id="cb2-34"><a href="#cb2-34" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> <span class="dv">7</span></span>
<span id="cb2-35"><a href="#cb2-35" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> <span class="st">'El Paso'</span>,<span class="st">'Houston'</span>:</span>
<span id="cb2-36"><a href="#cb2-36" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> <span class="dv">2</span></span>
<span id="cb2-37"><a href="#cb2-37" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> <span class="st">'El Paso'</span>,<span class="st">'Atlanta'</span>:</span>
<span id="cb2-38"><a href="#cb2-38" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> <span class="dv">5</span></span>
<span id="cb2-39"><a href="#cb2-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-40"><a href="#cb2-40" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> <span class="st">'Tampa Bay'</span>,<span class="st">'NY'</span>:</span>
<span id="cb2-41"><a href="#cb2-41" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> <span class="dv">7</span></span>
<span id="cb2-42"><a href="#cb2-42" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> <span class="st">'Tampa Bay'</span>,<span class="st">'Houston'</span>:</span>
<span id="cb2-43"><a href="#cb2-43" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> <span class="dv">6</span></span>
<span id="cb2-44"><a href="#cb2-44" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> <span class="st">'Tampa Bay'</span>,<span class="st">'Atlanta'</span>:</span>
<span id="cb2-45"><a href="#cb2-45" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> <span class="dv">4</span></span>
<span id="cb2-46"><a href="#cb2-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-47"><a href="#cb2-47" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> _:</span>
<span id="cb2-48"><a href="#cb2-48" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> inf</span>
<span id="cb2-49"><a href="#cb2-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-50"><a href="#cb2-50" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> relay_costs(f,t):</span>
<span id="cb2-51"><a href="#cb2-51" aria-hidden="true" tabindex="-1"></a>    match (f,t):</span>
<span id="cb2-52"><a href="#cb2-52" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> <span class="st">'Houston'</span>,<span class="st">'Chicago'</span>:</span>
<span id="cb2-53"><a href="#cb2-53" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> <span class="dv">4</span></span>
<span id="cb2-54"><a href="#cb2-54" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> <span class="st">'Houston'</span>,<span class="st">'LA'</span>:</span>
<span id="cb2-55"><a href="#cb2-55" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> <span class="dv">5</span></span>
<span id="cb2-56"><a href="#cb2-56" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> <span class="st">'Houston'</span>,<span class="st">'NY'</span>:</span>
<span id="cb2-57"><a href="#cb2-57" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> <span class="dv">6</span></span>
<span id="cb2-58"><a href="#cb2-58" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> <span class="st">'Houston'</span>,<span class="st">'Atlanta'</span>:</span>
<span id="cb2-59"><a href="#cb2-59" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> <span class="dv">2</span></span>
<span id="cb2-60"><a href="#cb2-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-61"><a href="#cb2-61" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> <span class="st">'Atlanta'</span>,<span class="st">'Chicago'</span>:</span>
<span id="cb2-62"><a href="#cb2-62" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> <span class="dv">4</span></span>
<span id="cb2-63"><a href="#cb2-63" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> <span class="st">'Atlanta'</span>,<span class="st">'NY'</span>:</span>
<span id="cb2-64"><a href="#cb2-64" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> <span class="dv">5</span></span>
<span id="cb2-65"><a href="#cb2-65" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> <span class="st">'Atlanta'</span>,<span class="st">'Houston'</span>:</span>
<span id="cb2-66"><a href="#cb2-66" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> <span class="dv">2</span></span>
<span id="cb2-67"><a href="#cb2-67" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-68"><a href="#cb2-68" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> _:</span>
<span id="cb2-69"><a href="#cb2-69" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> inf</span></code></pre></div>
<p>We now create the <em>edges</em> of our network flow.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>edges_source <span class="op">=</span> [ { <span class="st">'from'</span>: <span class="st">'Source'</span>,</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>                   <span class="st">'to'</span>: c,</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>                   }</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>                <span class="cf">for</span> c <span class="kw">in</span> warehouse_cities ]</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>edges_demand <span class="op">=</span> [ { <span class="st">'from'</span>: c,</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>                   <span class="st">'to'</span>: <span class="st">'Demand'</span>,</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>                   }</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>                 <span class="cf">for</span> c <span class="kw">in</span> store_cities</span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>                ]</span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>edges_ship <span class="op">=</span> [ { <span class="st">'from'</span>: source,</span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>                 <span class="st">'to'</span>: dest,</span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>                }</span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>               <span class="cf">for</span> source,dest <span class="kw">in</span> product(warehouse_cities,store_cities)</span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a>               <span class="cf">if</span> ship_costs(source,dest) <span class="op">!=</span> inf</span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a>              ]</span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a>edges_relay <span class="op">=</span> [ { <span class="st">'from'</span>: source,</span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a>                  <span class="st">'to'</span>: dest,</span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a>                 }</span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a>                <span class="cf">for</span> source,dest <span class="kw">in</span> product(store_cities,store_cities)</span>
<span id="cb3-26"><a href="#cb3-26" aria-hidden="true" tabindex="-1"></a>                <span class="cf">if</span> relay_costs(source,dest) <span class="op">!=</span> inf</span>
<span id="cb3-27"><a href="#cb3-27" aria-hidden="true" tabindex="-1"></a>               ]</span>
<span id="cb3-28"><a href="#cb3-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-29"><a href="#cb3-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-30"><a href="#cb3-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-31"><a href="#cb3-31" aria-hidden="true" tabindex="-1"></a>edges <span class="op">=</span>  edges_source <span class="op">+</span> edges_ship <span class="op">+</span> edges_relay <span class="op">+</span> edges_demand </span></code></pre></div>
<p>And we can use the <code>vertices</code> and <code>edges</code> to produce a diagram of the network
flow, using <code>graphviz</code>.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co">#--------------------------------------------------------------------------------</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> graphviz <span class="im">import</span> Digraph <span class="im">as</span> GVDigraph</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>dot <span class="op">=</span> GVDigraph(<span class="st">&quot;example&quot;</span>,<span class="bu">format</span><span class="op">=</span><span class="st">'png'</span>)</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>dot.attr(rankdir<span class="op">=</span><span class="st">'LR'</span>)</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>dot.node(<span class="st">'Source'</span>)</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> dot.subgraph(name<span class="op">=</span><span class="st">'warehouse'</span>) <span class="im">as</span> c:</span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>    c.attr(rank<span class="op">=</span><span class="st">'same'</span>)</span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> vertex <span class="kw">in</span> warehouse_cities:</span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>        c.node(vertex)</span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> dot.subgraph(name<span class="op">=</span><span class="st">'hubs'</span>) <span class="im">as</span> c:</span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>    c.attr(rank<span class="op">=</span><span class="st">'same'</span>)</span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> vertex <span class="kw">in</span> hubs:</span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a>        c.node(vertex)            </span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> dot.subgraph(name<span class="op">=</span><span class="st">'stores'</span>) <span class="im">as</span> c:</span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a>    c.attr(rank<span class="op">=</span><span class="st">'same'</span>)</span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> vertex <span class="kw">in</span> store_cities:</span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="kw">not</span> (vertex <span class="kw">in</span> hubs):</span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true" tabindex="-1"></a>            c.node(vertex)</span>
<span id="cb4-24"><a href="#cb4-24" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb4-25"><a href="#cb4-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-26"><a href="#cb4-26" aria-hidden="true" tabindex="-1"></a>c.node(<span class="st">'Demand'</span>)</span>
<span id="cb4-27"><a href="#cb4-27" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb4-28"><a href="#cb4-28" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> e <span class="kw">in</span> edges:</span>
<span id="cb4-29"><a href="#cb4-29" aria-hidden="true" tabindex="-1"></a><span class="co">#  dot.edge(e[&quot;from&quot;],e[&quot;to&quot;],label=f&quot;costs {e['ship_costs']}&quot;)</span></span>
<span id="cb4-30"><a href="#cb4-30" aria-hidden="true" tabindex="-1"></a>  dot.edge(e[<span class="st">&quot;from&quot;</span>],e[<span class="st">&quot;to&quot;</span>])    </span>
<span id="cb4-31"><a href="#cb4-31" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb4-32"><a href="#cb4-32" aria-hidden="true" tabindex="-1"></a>dot.render(<span class="st">'graph.png'</span>)</span></code></pre></div>
<p><img src="../course-assets/images/graph.png" /></p>
<p>Now we need to create the <code>objective function</code> for the linear program that we will use to
minimize shipping costs.</p>
<p>We first create the objective vector for the “costs” linear program:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># return a standard basis vector</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="co"># these are &quot;0-indexed&quot; e.g. sbv(0,3) == [1,0,0]</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> sbv(index,size):</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> np.array([<span class="fl">1.0</span> <span class="cf">if</span> i <span class="op">==</span> index <span class="cf">else</span> <span class="fl">0.0</span> <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(size)])</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="co"># we first create the vector for the costs for shipments from warehouse cities to store cities</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>ship_costs_obj <span class="op">=</span> <span class="bu">sum</span>([ ship_costs(e[<span class="st">'from'</span>],e[<span class="st">'to'</span>])<span class="op">*</span>sbv(edges.index(e),<span class="bu">len</span>(edges))</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>                       <span class="cf">for</span> e <span class="kw">in</span> edges_ship])</span></code></pre></div>
<div class="sourceCode" id="cb6"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>ship_costs_obj</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="op">=&gt;</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>array([<span class="fl">0.</span>, <span class="fl">0.</span>, <span class="fl">0.</span>, <span class="fl">6.</span>, <span class="fl">3.</span>, <span class="fl">3.</span>, <span class="fl">7.</span>, <span class="fl">7.</span>, <span class="fl">2.</span>, <span class="fl">5.</span>, <span class="fl">7.</span>, <span class="fl">6.</span>, <span class="fl">4.</span>, <span class="fl">0.</span>, <span class="fl">0.</span>, <span class="fl">0.</span>, <span class="fl">0.</span>,</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>       <span class="fl">0.</span>, <span class="fl">0.</span>, <span class="fl">0.</span>, <span class="fl">0.</span>, <span class="fl">0.</span>, <span class="fl">0.</span>, <span class="fl">0.</span>, <span class="fl">0.</span>])</span></code></pre></div>
<div class="sourceCode" id="cb7"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># we then create the vector for the relay costs</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>relay_costs_obj <span class="op">=</span> <span class="bu">sum</span>([ relay_costs(e[<span class="st">'from'</span>],e[<span class="st">'to'</span>])<span class="op">*</span>sbv(edges.index(e),<span class="bu">len</span>(edges))</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>                        <span class="cf">for</span> e <span class="kw">in</span> edges_relay])</span></code></pre></div>
<div class="sourceCode" id="cb8"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>relay_costs_obj</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="op">=&gt;</span> </span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>array([<span class="fl">0.</span>, <span class="fl">0.</span>, <span class="fl">0.</span>, <span class="fl">0.</span>, <span class="fl">0.</span>, <span class="fl">0.</span>, <span class="fl">0.</span>, <span class="fl">0.</span>, <span class="fl">0.</span>, <span class="fl">0.</span>, <span class="fl">0.</span>, <span class="fl">0.</span>, <span class="fl">0.</span>, <span class="fl">4.</span>, <span class="fl">5.</span>, <span class="fl">6.</span>, <span class="fl">2.</span>,</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>       <span class="fl">4.</span>, <span class="fl">5.</span>, <span class="fl">2.</span>, <span class="fl">0.</span>, <span class="fl">0.</span>, <span class="fl">0.</span>, <span class="fl">0.</span>, <span class="fl">0.</span>])</span></code></pre></div>
<div class="sourceCode" id="cb9"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># the objective function is then the vector sum of the previous two results</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>costs_obj <span class="op">=</span> ship_costs_obj <span class="op">+</span> relay_costs_obj</span></code></pre></div>
<div class="sourceCode" id="cb10"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>costs_obj</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="op">=&gt;</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>array([<span class="fl">0.</span>, <span class="fl">0.</span>, <span class="fl">0.</span>, <span class="fl">6.</span>, <span class="fl">3.</span>, <span class="fl">3.</span>, <span class="fl">7.</span>, <span class="fl">7.</span>, <span class="fl">2.</span>, <span class="fl">5.</span>, <span class="fl">7.</span>, <span class="fl">6.</span>, <span class="fl">4.</span>, <span class="fl">4.</span>, <span class="fl">5.</span>, <span class="fl">6.</span>, <span class="fl">2.</span>,</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>       <span class="fl">4.</span>, <span class="fl">5.</span>, <span class="fl">2.</span>, <span class="fl">0.</span>, <span class="fl">0.</span>, <span class="fl">0.</span>, <span class="fl">0.</span>, <span class="fl">0.</span>])</span></code></pre></div>
<p>Next, we need to represent the <em>conservation laws</em> for each interior
vertex of our network flow.</p>
<p>We first need to be able to <em>identify</em> interior vertices; we use the following code:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> getIncoming(vertex,edges):</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> [ e <span class="cf">for</span> e <span class="kw">in</span> edges <span class="cf">if</span> e[<span class="st">&quot;to&quot;</span>] <span class="op">==</span> vertex ]</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> getOutgoing(vertex,edges):</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> [ e <span class="cf">for</span> e <span class="kw">in</span> edges <span class="cf">if</span> e[<span class="st">&quot;from&quot;</span>] <span class="op">==</span> vertex ] </span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> isSource(vertex,edges):</span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> getIncoming(vertex,edges) <span class="op">==</span> []</span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> isSink(vertex,edges):</span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> getOutgoing(vertex,edges) <span class="op">==</span> []</span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> interiorVertices(vertices,edges):</span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> [ v <span class="cf">for</span> v <span class="kw">in</span> vertices <span class="cf">if</span> <span class="kw">not</span>( isSource(v,edges) <span class="kw">or</span> isSink(v,edges) ) ]</span></code></pre></div>
<p>Observe that this code indeed finds our interior vertices:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>interiorVertices(vertices,edges)</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="op">=&gt;</span> </span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>[<span class="st">'Santa Fe'</span>, <span class="st">'El Paso'</span>, <span class="st">'Tampa Bay'</span>, <span class="st">'Chicago'</span>, <span class="st">'LA'</span>, <span class="st">'NY'</span>, <span class="st">'Houston'</span>, <span class="st">'Atlanta'</span>]</span></code></pre></div>
<p>Now we can create the <em>conservation laws matrix</em> for our network flow.
This matrix has one row for each interior vertex of the network flow;
this row expresses the relation that the sum of flow through edges
<em>to</em> the vertex is equal to the sum of flow through edges <em>from</em> the
vertex.</p>
<p>We use the following code:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> conservationLaw(vertex,edges):</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>    ii <span class="op">=</span> <span class="bu">sum</span>([ sbv(edges.index(e),<span class="bu">len</span>(edges)) <span class="cf">for</span> e <span class="kw">in</span> getIncoming(vertex,edges) ])</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>    oo <span class="op">=</span> <span class="bu">sum</span>([ sbv(edges.index(e),<span class="bu">len</span>(edges)) <span class="cf">for</span> e <span class="kw">in</span> getOutgoing(vertex,edges) ])</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> ii <span class="op">-</span> oo</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>conservationMatrix <span class="op">=</span>np.array([conservationLaw(v,edges) <span class="cf">for</span> v <span class="kw">in</span> interiorVertices(vertices,edges) ])</span></code></pre></div>
<p>And we can inspect this matrix:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>conservationMatrix</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="op">=&gt;</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>array([[ <span class="fl">1.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>, <span class="op">-</span><span class="fl">1.</span>, <span class="op">-</span><span class="fl">1.</span>, <span class="op">-</span><span class="fl">1.</span>, <span class="op">-</span><span class="fl">1.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>,</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>         <span class="fl">0.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>],</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>       [ <span class="fl">0.</span>,  <span class="fl">1.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>, <span class="op">-</span><span class="fl">1.</span>, <span class="op">-</span><span class="fl">1.</span>, <span class="op">-</span><span class="fl">1.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>,</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>         <span class="fl">0.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>],</span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>       [ <span class="fl">0.</span>,  <span class="fl">0.</span>,  <span class="fl">1.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>, <span class="op">-</span><span class="fl">1.</span>, <span class="op">-</span><span class="fl">1.</span>, <span class="op">-</span><span class="fl">1.</span>,</span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>         <span class="fl">0.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>],</span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>       [ <span class="fl">0.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>,  <span class="fl">1.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>,</span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>         <span class="fl">1.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>,  <span class="fl">1.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>, <span class="op">-</span><span class="fl">1.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>],</span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a>       [ <span class="fl">0.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>,  <span class="fl">1.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>,  <span class="fl">1.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>,</span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a>         <span class="fl">0.</span>,  <span class="fl">1.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>, <span class="op">-</span><span class="fl">1.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>],</span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a>       [ <span class="fl">0.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>,  <span class="fl">1.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>,</span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a>         <span class="fl">0.</span>,  <span class="fl">0.</span>,  <span class="fl">1.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>,  <span class="fl">1.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>, <span class="op">-</span><span class="fl">1.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>],</span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a>       [ <span class="fl">0.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>,  <span class="fl">1.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>,  <span class="fl">1.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>,  <span class="fl">1.</span>,  <span class="fl">0.</span>,</span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a>        <span class="op">-</span><span class="fl">1.</span>, <span class="op">-</span><span class="fl">1.</span>, <span class="op">-</span><span class="fl">1.</span>, <span class="op">-</span><span class="fl">1.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>,  <span class="fl">1.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>, <span class="op">-</span><span class="fl">1.</span>,  <span class="fl">0.</span>],</span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a>       [ <span class="fl">0.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>,  <span class="fl">1.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>,  <span class="fl">1.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>,  <span class="fl">1.</span>,</span>
<span id="cb14-18"><a href="#cb14-18" aria-hidden="true" tabindex="-1"></a>         <span class="fl">0.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>,  <span class="fl">1.</span>, <span class="op">-</span><span class="fl">1.</span>, <span class="op">-</span><span class="fl">1.</span>, <span class="op">-</span><span class="fl">1.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>, <span class="op">-</span><span class="fl">1.</span>]])</span></code></pre></div>
<p>The linear program we will use to minimize shipping costs has <em>equality constraints</em>.</p>
<ul>
<li><p>The conservation laws that we just created will be expressed as <em>equality constraints</em></p></li>
<li><p>When minimizing the shipping costs, we ship all available ducks from
the warehouses, and we meet demand in the store cities. Thus, we
implement the <code>supply</code> and <code>demand</code> as <em>equality constraints</em> in our
linear program.</p>
<p>More precisely, for each warehouse city <code>w</code>, the
variable corresponding to edge <code>{'from':'Source','to':w}</code> is equated with
the quantity <code>supplies[w]</code>.</p>
<p>Similarly, for each store city <code>w</code>, the variable
corresponding to the edge <code>{'from':w,'to':'Demand'}</code> is equated with the
quantity <code>demand[s]</code>.</p></li>
</ul>
<p>We create the pair
<code>Aeq_costs,beq_costs</code> determining the equality constraints using the following code:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># return the edge with 'from': f and 'to': t</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> lookupEdge(f,t):</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>    r <span class="op">=</span> <span class="bu">list</span>(<span class="bu">filter</span>(<span class="kw">lambda</span> x: x[<span class="st">'from'</span>] <span class="op">==</span> f <span class="kw">and</span> x[<span class="st">'to'</span>] <span class="op">==</span> t, edges))</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> r <span class="op">!=</span> []:</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> r[<span class="dv">0</span>]</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="st">&quot;error&quot;</span></span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> lookupEdgeIndex(f,t):</span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a>    r <span class="op">=</span> lookupEdge(f,t)</span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> edges.index(r)</span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a>Aeq_costs <span class="op">=</span> np.concatenate([ conservationMatrix,</span>
<span id="cb15-17"><a href="#cb15-17" aria-hidden="true" tabindex="-1"></a>                             [ sbv(lookupEdgeIndex(<span class="st">'Source'</span>,w),<span class="bu">len</span>(edges))</span>
<span id="cb15-18"><a href="#cb15-18" aria-hidden="true" tabindex="-1"></a>                               <span class="cf">for</span> w <span class="kw">in</span> warehouse_cities ],</span>
<span id="cb15-19"><a href="#cb15-19" aria-hidden="true" tabindex="-1"></a>                             [ sbv(lookupEdgeIndex(s,<span class="st">'Demand'</span>),<span class="bu">len</span>(edges))</span>
<span id="cb15-20"><a href="#cb15-20" aria-hidden="true" tabindex="-1"></a>                               <span class="cf">for</span> s <span class="kw">in</span> store_cities ]</span>
<span id="cb15-21"><a href="#cb15-21" aria-hidden="true" tabindex="-1"></a>                            ],axis<span class="op">=</span><span class="dv">0</span>)</span>
<span id="cb15-22"><a href="#cb15-22" aria-hidden="true" tabindex="-1"></a>beq_costs <span class="op">=</span> np.concatenate([ np.zeros(<span class="bu">len</span>(conservationMatrix)),</span>
<span id="cb15-23"><a href="#cb15-23" aria-hidden="true" tabindex="-1"></a>                             [ supplies[w] <span class="cf">for</span> w <span class="kw">in</span> warehouse_cities ],</span>
<span id="cb15-24"><a href="#cb15-24" aria-hidden="true" tabindex="-1"></a>                             [ demand[s] <span class="cf">for</span> s <span class="kw">in</span> store_cities ]</span>
<span id="cb15-25"><a href="#cb15-25" aria-hidden="true" tabindex="-1"></a>                            ])</span></code></pre></div>
<p>Finally, we need to create inequality constraints reflecting the condition
that we can’t ship more than 200 ducks along any single route.</p>
<p>The pair <code>Aub_costs,bub_costs</code> implement these constraints; these
quantities are created by the following code:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create inequality constraint matrix</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="co"># initially the only thing to account for is &quot;can't ship more than 200 ducks&quot;</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>Aub_costs <span class="op">=</span> np.array([ sbv(edges.index(e),<span class="bu">len</span>(edges)) <span class="cf">for</span> e <span class="kw">in</span> edges_ship ]</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>                     <span class="op">+</span> [ sbv(edges.index(e),<span class="bu">len</span>(edges)) <span class="cf">for</span> e <span class="kw">in</span> edges_relay ])</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>bub_costs <span class="op">=</span> np.array([ <span class="dv">200</span> <span class="cf">for</span> e <span class="kw">in</span> edges_ship]</span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>                     <span class="op">+</span> [ <span class="dv">200</span> <span class="cf">for</span> e <span class="kw">in</span> edges_relay ] )</span></code></pre></div>
<p>We are now ready to run the linear program which minimizes shipping costs.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>costs_result <span class="op">=</span> linprog(costs_obj,</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>                       A_eq <span class="op">=</span> Aeq_costs,</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>                       b_eq <span class="op">=</span> beq_costs,</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>                       A_ub <span class="op">=</span> Aub_costs,</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>                       b_ub <span class="op">=</span> bub_costs</span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>                       )</span></code></pre></div>
<p>We see that the minimal shipping costs are $5,300.00:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>costs_result.fun</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="op">=&gt;</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a><span class="fl">5300.0</span></span></code></pre></div>
<p>And we can see the required shipping levels by inspecting <code>costs_result.x</code>.
Let’s view a report of this information:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> report(x):</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (val,e) <span class="kw">in</span> <span class="bu">zip</span>(x,edges):</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="ss">f&quot;</span><span class="sc">{</span>e[<span class="st">'from'</span>]<span class="sc">:10}</span><span class="ss"> -&gt; </span><span class="sc">{</span>e[<span class="st">'to'</span>]<span class="sc">:10}</span><span class="ss">:  </span><span class="sc">{</span>val<span class="sc">: 7.2f}</span><span class="ss">&quot;</span>)</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>		</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>report(costs_result.x)</span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a><span class="op">=&gt;</span></span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>Source     <span class="op">-&gt;</span> Santa Fe  :   <span class="fl">700.00</span></span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a>Source     <span class="op">-&gt;</span> El Paso   :   <span class="fl">200.00</span></span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a>Source     <span class="op">-&gt;</span> Tampa Bay :   <span class="fl">200.00</span></span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a>Santa Fe   <span class="op">-&gt;</span> Chicago   :   <span class="fl">200.00</span></span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a>Santa Fe   <span class="op">-&gt;</span> LA        :   <span class="fl">200.00</span></span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a>Santa Fe   <span class="op">-&gt;</span> Houston   :   <span class="fl">200.00</span></span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a>Santa Fe   <span class="op">-&gt;</span> Atlanta   :   <span class="fl">100.00</span></span>
<span id="cb19-15"><a href="#cb19-15" aria-hidden="true" tabindex="-1"></a>El Paso    <span class="op">-&gt;</span> LA        :     <span class="fl">0.00</span></span>
<span id="cb19-16"><a href="#cb19-16" aria-hidden="true" tabindex="-1"></a>El Paso    <span class="op">-&gt;</span> Houston   :   <span class="fl">200.00</span></span>
<span id="cb19-17"><a href="#cb19-17" aria-hidden="true" tabindex="-1"></a>El Paso    <span class="op">-&gt;</span> Atlanta   :    <span class="op">-</span><span class="fl">0.00</span></span>
<span id="cb19-18"><a href="#cb19-18" aria-hidden="true" tabindex="-1"></a>Tampa Bay  <span class="op">-&gt;</span> NY        :   <span class="fl">200.00</span></span>
<span id="cb19-19"><a href="#cb19-19" aria-hidden="true" tabindex="-1"></a>Tampa Bay  <span class="op">-&gt;</span> Houston   :     <span class="fl">0.00</span></span>
<span id="cb19-20"><a href="#cb19-20" aria-hidden="true" tabindex="-1"></a>Tampa Bay  <span class="op">-&gt;</span> Atlanta   :     <span class="fl">0.00</span></span>
<span id="cb19-21"><a href="#cb19-21" aria-hidden="true" tabindex="-1"></a>Houston    <span class="op">-&gt;</span> Chicago   :     <span class="fl">0.00</span></span>
<span id="cb19-22"><a href="#cb19-22" aria-hidden="true" tabindex="-1"></a>Houston    <span class="op">-&gt;</span> LA        :     <span class="fl">0.00</span></span>
<span id="cb19-23"><a href="#cb19-23" aria-hidden="true" tabindex="-1"></a>Houston    <span class="op">-&gt;</span> NY        :    <span class="fl">50.00</span></span>
<span id="cb19-24"><a href="#cb19-24" aria-hidden="true" tabindex="-1"></a>Houston    <span class="op">-&gt;</span> Atlanta   :    <span class="fl">50.00</span></span>
<span id="cb19-25"><a href="#cb19-25" aria-hidden="true" tabindex="-1"></a>Atlanta    <span class="op">-&gt;</span> Chicago   :     <span class="fl">0.00</span></span>
<span id="cb19-26"><a href="#cb19-26" aria-hidden="true" tabindex="-1"></a>Atlanta    <span class="op">-&gt;</span> NY        :     <span class="fl">0.00</span></span>
<span id="cb19-27"><a href="#cb19-27" aria-hidden="true" tabindex="-1"></a>Atlanta    <span class="op">-&gt;</span> Houston   :     <span class="fl">0.00</span></span>
<span id="cb19-28"><a href="#cb19-28" aria-hidden="true" tabindex="-1"></a>Chicago    <span class="op">-&gt;</span> Demand    :   <span class="fl">200.00</span></span>
<span id="cb19-29"><a href="#cb19-29" aria-hidden="true" tabindex="-1"></a>LA         <span class="op">-&gt;</span> Demand    :   <span class="fl">200.00</span></span>
<span id="cb19-30"><a href="#cb19-30" aria-hidden="true" tabindex="-1"></a>NY         <span class="op">-&gt;</span> Demand    :   <span class="fl">250.00</span></span>
<span id="cb19-31"><a href="#cb19-31" aria-hidden="true" tabindex="-1"></a>Houston    <span class="op">-&gt;</span> Demand    :   <span class="fl">300.00</span></span>
<span id="cb19-32"><a href="#cb19-32" aria-hidden="true" tabindex="-1"></a>Atlanta    <span class="op">-&gt;</span> Demand    :   <span class="fl">150.00</span></span></code></pre></div>
<h1 id="los-angeles-potential-strike-scenario">Los Angeles potential strike scenario</h1>
<h2 id="meeting-worker-demands">Meeting worker demands</h2>
<p>We first model the consequences on our shipping costs of meeting the
workers demands.</p>
<p>We model the shipping costs and the relay costs with new functions, as follows:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> LA_demand_ship_costs(f,t):</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>    match (f,t):</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>        case (_,<span class="st">'LA'</span>):</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> <span class="dv">2</span><span class="op">*</span>ship_costs(f,t)      <span class="co">## double shipping costs to LA</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> _:</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> ship_costs(f,t)</span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> LA_demand_relay_costs(f,t):</span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a>    match (f,t):</span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a>        case (_,<span class="st">'LA'</span>):</span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> <span class="dv">2</span><span class="op">*</span>relay_costs(f,t)      <span class="co">## double shipping costs to LA</span></span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> _:</span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> relay_costs(f,t)</span></code></pre></div>
<p>In order to use these altered shipping costs in a linear program, we use the to produce a new objective vector:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>LA_demand_ship_costs_obj <span class="op">=</span> <span class="bu">sum</span>([ LA_demand_ship_costs(e[<span class="st">'from'</span>],e[<span class="st">'to'</span>])<span class="op">*</span>sbv(edges.index(e),<span class="bu">len</span>(edges))</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>                       <span class="cf">for</span> e <span class="kw">in</span> edges_ship])</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>LA_demand_relay_costs_obj <span class="op">=</span> <span class="bu">sum</span>([ relay_costs(e[<span class="st">'from'</span>],e[<span class="st">'to'</span>])<span class="op">*</span>sbv(edges.index(e),<span class="bu">len</span>(edges))</span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>                        <span class="cf">for</span> e <span class="kw">in</span> edges_relay])</span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>LA_demand_costs_obj <span class="op">=</span> LA_demand_ship_costs_obj <span class="op">+</span> LA_demand_relay_costs_obj</span></code></pre></div>
<p>We can now run the linear program and see the consequences:</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>LA_demand_costs_result <span class="op">=</span> linprog(LA_demand_costs_obj,</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>                                 A_eq <span class="op">=</span> Aeq_costs,</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>                                 b_eq <span class="op">=</span> beq_costs,</span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>                                 A_ub <span class="op">=</span> Aub_costs,</span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>                                 b_ub <span class="op">=</span> bub_costs</span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>                                 )</span></code></pre></div>
<p>We see that our shipping costs indeed increase, to $5,900.00 – i.e. the costs increase
by $600.</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>LA_demand_costs_result.fun</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="op">=&gt;</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a><span class="fl">5900.0</span></span></code></pre></div>
<p>And we can see the details of how our shipping choices will be affected.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>report(LA_demand_costs_result.x)</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="op">=&gt;</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>Source     <span class="op">-&gt;</span> Santa Fe  :   <span class="fl">700.00</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>Source     <span class="op">-&gt;</span> El Paso   :   <span class="fl">200.00</span></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>Source     <span class="op">-&gt;</span> Tampa Bay :   <span class="fl">200.00</span></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>Santa Fe   <span class="op">-&gt;</span> Chicago   :   <span class="fl">200.00</span></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>Santa Fe   <span class="op">-&gt;</span> LA        :   <span class="fl">200.00</span></span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>Santa Fe   <span class="op">-&gt;</span> Houston   :   <span class="fl">200.00</span></span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a>Santa Fe   <span class="op">-&gt;</span> Atlanta   :   <span class="fl">100.00</span></span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a>El Paso    <span class="op">-&gt;</span> LA        :     <span class="fl">0.00</span></span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a>El Paso    <span class="op">-&gt;</span> Houston   :   <span class="fl">200.00</span></span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a>El Paso    <span class="op">-&gt;</span> Atlanta   :    <span class="op">-</span><span class="fl">0.00</span></span>
<span id="cb24-13"><a href="#cb24-13" aria-hidden="true" tabindex="-1"></a>Tampa Bay  <span class="op">-&gt;</span> NY        :   <span class="fl">200.00</span></span>
<span id="cb24-14"><a href="#cb24-14" aria-hidden="true" tabindex="-1"></a>Tampa Bay  <span class="op">-&gt;</span> Houston   :     <span class="fl">0.00</span></span>
<span id="cb24-15"><a href="#cb24-15" aria-hidden="true" tabindex="-1"></a>Tampa Bay  <span class="op">-&gt;</span> Atlanta   :     <span class="fl">0.00</span></span>
<span id="cb24-16"><a href="#cb24-16" aria-hidden="true" tabindex="-1"></a>Houston    <span class="op">-&gt;</span> Chicago   :     <span class="fl">0.00</span></span>
<span id="cb24-17"><a href="#cb24-17" aria-hidden="true" tabindex="-1"></a>Houston    <span class="op">-&gt;</span> LA        :     <span class="fl">0.00</span></span>
<span id="cb24-18"><a href="#cb24-18" aria-hidden="true" tabindex="-1"></a>Houston    <span class="op">-&gt;</span> NY        :    <span class="fl">50.00</span></span>
<span id="cb24-19"><a href="#cb24-19" aria-hidden="true" tabindex="-1"></a>Houston    <span class="op">-&gt;</span> Atlanta   :    <span class="fl">50.00</span></span>
<span id="cb24-20"><a href="#cb24-20" aria-hidden="true" tabindex="-1"></a>Atlanta    <span class="op">-&gt;</span> Chicago   :     <span class="fl">0.00</span></span>
<span id="cb24-21"><a href="#cb24-21" aria-hidden="true" tabindex="-1"></a>Atlanta    <span class="op">-&gt;</span> NY        :     <span class="fl">0.00</span></span>
<span id="cb24-22"><a href="#cb24-22" aria-hidden="true" tabindex="-1"></a>Atlanta    <span class="op">-&gt;</span> Houston   :     <span class="fl">0.00</span></span>
<span id="cb24-23"><a href="#cb24-23" aria-hidden="true" tabindex="-1"></a>Chicago    <span class="op">-&gt;</span> Demand    :   <span class="fl">200.00</span></span>
<span id="cb24-24"><a href="#cb24-24" aria-hidden="true" tabindex="-1"></a>LA         <span class="op">-&gt;</span> Demand    :   <span class="fl">200.00</span></span>
<span id="cb24-25"><a href="#cb24-25" aria-hidden="true" tabindex="-1"></a>NY         <span class="op">-&gt;</span> Demand    :   <span class="fl">250.00</span></span>
<span id="cb24-26"><a href="#cb24-26" aria-hidden="true" tabindex="-1"></a>Houston    <span class="op">-&gt;</span> Demand    :   <span class="fl">300.00</span></span>
<span id="cb24-27"><a href="#cb24-27" aria-hidden="true" tabindex="-1"></a>Atlanta    <span class="op">-&gt;</span> Demand    :   <span class="fl">150.00</span></span></code></pre></div>
<h2 id="consequences-of-a-strike-in-la">Consequences of a strike in LA</h2>
<p>In order to model the results of a strike, the inequality constraints
used by our linear program must be changed to reflect the reduced
shipping capacity caused by the strike.</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co">## the Aub matrix is the same as befofe</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>LA_strike_Aub_costs <span class="op">=</span> np.array([ sbv(edges.index(e),<span class="bu">len</span>(edges)) <span class="cf">for</span> e <span class="kw">in</span> edges_ship ]</span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>                               <span class="op">+</span> [ sbv(edges.index(e),<span class="bu">len</span>(edges)) <span class="cf">for</span> e <span class="kw">in</span> edges_relay ])</span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a><span class="co">## but we must change the bub vector</span></span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a><span class="co"># the capacity for a route is 100 on any route `to` LA.</span></span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a><span class="co"># otherwise the capacity remains 200</span></span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> LA_strike_capacity(e):</span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">match</span> e[<span class="st">'to'</span>]:</span>
<span id="cb25-13"><a href="#cb25-13" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> <span class="st">'LA'</span>:</span>
<span id="cb25-14"><a href="#cb25-14" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> <span class="dv">100</span></span>
<span id="cb25-15"><a href="#cb25-15" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> _:</span>
<span id="cb25-16"><a href="#cb25-16" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> <span class="dv">200</span></span>
<span id="cb25-17"><a href="#cb25-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-18"><a href="#cb25-18" aria-hidden="true" tabindex="-1"></a>LA_strike_bub_costs <span class="op">=</span> np.array([ LA_strike_capacity(e) <span class="cf">for</span> e <span class="kw">in</span> edges_ship]</span>
<span id="cb25-19"><a href="#cb25-19" aria-hidden="true" tabindex="-1"></a>                               <span class="op">+</span> [ LA_strike_capacity(e) <span class="cf">for</span> e <span class="kw">in</span> edges_relay ] )</span></code></pre></div>
<p>We can now run the linear program modeling a strike in LA:</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>LA_strike_costs_result <span class="op">=</span> linprog(costs_obj,</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>                                 A_eq <span class="op">=</span> Aeq_costs,</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>                                 b_eq <span class="op">=</span> beq_costs,</span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>                                 A_ub <span class="op">=</span> LA_strike_Aub_costs,</span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>                                 b_ub <span class="op">=</span> LA_strike_bub_costs</span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>                                 )</span></code></pre></div>
<p>In the strike scenario, our costs go up to $6050.00. Indeed:</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>LA_strike_costs_result.fun</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="op">=&gt;</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a><span class="fl">6050.0</span></span></code></pre></div>
<div class="sourceCode" id="cb28"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>report(LA_strike_costs_result.x)</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="op">=&gt;</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>Source     <span class="op">-&gt;</span> Santa Fe  :   <span class="fl">700.00</span></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>Source     <span class="op">-&gt;</span> El Paso   :   <span class="fl">200.00</span></span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>Source     <span class="op">-&gt;</span> Tampa Bay :   <span class="fl">200.00</span></span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>Santa Fe   <span class="op">-&gt;</span> Chicago   :   <span class="fl">200.00</span></span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a>Santa Fe   <span class="op">-&gt;</span> LA        :   <span class="fl">100.00</span></span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a>Santa Fe   <span class="op">-&gt;</span> Houston   :   <span class="fl">200.00</span></span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a>Santa Fe   <span class="op">-&gt;</span> Atlanta   :   <span class="fl">200.00</span></span>
<span id="cb28-10"><a href="#cb28-10" aria-hidden="true" tabindex="-1"></a>El Paso    <span class="op">-&gt;</span> LA        :     <span class="fl">0.00</span></span>
<span id="cb28-11"><a href="#cb28-11" aria-hidden="true" tabindex="-1"></a>El Paso    <span class="op">-&gt;</span> Houston   :   <span class="fl">200.00</span></span>
<span id="cb28-12"><a href="#cb28-12" aria-hidden="true" tabindex="-1"></a>El Paso    <span class="op">-&gt;</span> Atlanta   :     <span class="fl">0.00</span></span>
<span id="cb28-13"><a href="#cb28-13" aria-hidden="true" tabindex="-1"></a>Tampa Bay  <span class="op">-&gt;</span> NY        :   <span class="fl">200.00</span></span>
<span id="cb28-14"><a href="#cb28-14" aria-hidden="true" tabindex="-1"></a>Tampa Bay  <span class="op">-&gt;</span> Houston   :     <span class="fl">0.00</span></span>
<span id="cb28-15"><a href="#cb28-15" aria-hidden="true" tabindex="-1"></a>Tampa Bay  <span class="op">-&gt;</span> Atlanta   :     <span class="fl">0.00</span></span>
<span id="cb28-16"><a href="#cb28-16" aria-hidden="true" tabindex="-1"></a>Houston    <span class="op">-&gt;</span> Chicago   :     <span class="fl">0.00</span></span>
<span id="cb28-17"><a href="#cb28-17" aria-hidden="true" tabindex="-1"></a>Houston    <span class="op">-&gt;</span> LA        :   <span class="fl">100.00</span></span>
<span id="cb28-18"><a href="#cb28-18" aria-hidden="true" tabindex="-1"></a>Houston    <span class="op">-&gt;</span> NY        :     <span class="fl">0.00</span></span>
<span id="cb28-19"><a href="#cb28-19" aria-hidden="true" tabindex="-1"></a>Houston    <span class="op">-&gt;</span> Atlanta   :     <span class="fl">0.00</span></span>
<span id="cb28-20"><a href="#cb28-20" aria-hidden="true" tabindex="-1"></a>Atlanta    <span class="op">-&gt;</span> Chicago   :    <span class="op">-</span><span class="fl">0.00</span></span>
<span id="cb28-21"><a href="#cb28-21" aria-hidden="true" tabindex="-1"></a>Atlanta    <span class="op">-&gt;</span> NY        :    <span class="fl">50.00</span></span>
<span id="cb28-22"><a href="#cb28-22" aria-hidden="true" tabindex="-1"></a>Atlanta    <span class="op">-&gt;</span> Houston   :     <span class="fl">0.00</span></span>
<span id="cb28-23"><a href="#cb28-23" aria-hidden="true" tabindex="-1"></a>Chicago    <span class="op">-&gt;</span> Demand    :   <span class="fl">200.00</span></span>
<span id="cb28-24"><a href="#cb28-24" aria-hidden="true" tabindex="-1"></a>LA         <span class="op">-&gt;</span> Demand    :   <span class="fl">200.00</span></span>
<span id="cb28-25"><a href="#cb28-25" aria-hidden="true" tabindex="-1"></a>NY         <span class="op">-&gt;</span> Demand    :   <span class="fl">250.00</span></span>
<span id="cb28-26"><a href="#cb28-26" aria-hidden="true" tabindex="-1"></a>Houston    <span class="op">-&gt;</span> Demand    :   <span class="fl">300.00</span></span>
<span id="cb28-27"><a href="#cb28-27" aria-hidden="true" tabindex="-1"></a>Atlanta    <span class="op">-&gt;</span> Demand    :   <span class="fl">150.00</span></span></code></pre></div>
<p>In this case, the strike is $150 more costly – raising our costs to
$6,050 – than the demand scenario – which only raises our costs to
$5,900.</p>
<p>So unless there are relevant issues not considered here, we should
probably agree to the LA workers demands.</p>
<h1 id="houston-potential-strike-scenario">Houston potential strike scenario</h1>
<p>We now model the same situation as contemplated in LA, but instead for
the city Houston.</p>
<h2 id="meeting-worker-demands-1">Meeting worker demands</h2>
<p>We model the shipping costs and the relay costs with new functions, as
follows:</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> Houston_demand_ship_costs(f,t):</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>    match (f,t):</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>        case (_,<span class="st">'Houston'</span>):</span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> <span class="dv">2</span><span class="op">*</span>ship_costs(f,t)      <span class="co">## double shipping costs to Houston</span></span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> _:</span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> ship_costs(f,t)</span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> Houston_demand_relay_costs(f,t):</span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a>    match (f,t):</span>
<span id="cb29-11"><a href="#cb29-11" aria-hidden="true" tabindex="-1"></a>        case (_,<span class="st">'Houston'</span>):</span>
<span id="cb29-12"><a href="#cb29-12" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> <span class="dv">2</span><span class="op">*</span>relay_costs(f,t)      <span class="co">## double shipping costs to Houston</span></span>
<span id="cb29-13"><a href="#cb29-13" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> _:</span>
<span id="cb29-14"><a href="#cb29-14" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> relay_costs(f,t)</span></code></pre></div>
<p>Using these new costs functions, we define the objective vector for
the linear program minimizing costs if we meet worker demands, and we
run the corresponding linear program:</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>Houston_demand_ship_costs_obj <span class="op">=</span> <span class="bu">sum</span>([ Houston_demand_ship_costs(e[<span class="st">'from'</span>],e[<span class="st">'to'</span>])<span class="op">*</span>sbv(edges.index(e),<span class="bu">len</span>(edges))</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>                       <span class="cf">for</span> e <span class="kw">in</span> edges_ship])</span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>Houston_demand_relay_costs_obj <span class="op">=</span> <span class="bu">sum</span>([ relay_costs(e[<span class="st">'from'</span>],e[<span class="st">'to'</span>])<span class="op">*</span>sbv(edges.index(e),<span class="bu">len</span>(edges))</span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>                        <span class="cf">for</span> e <span class="kw">in</span> edges_relay])</span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a>Houston_demand_costs_obj <span class="op">=</span> Houston_demand_ship_costs_obj <span class="op">+</span> Houston_demand_relay_costs_obj</span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a><span class="co"># results</span></span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-11"><a href="#cb30-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-12"><a href="#cb30-12" aria-hidden="true" tabindex="-1"></a>Houston_demand_costs_result <span class="op">=</span> linprog(Houston_demand_costs_obj,</span>
<span id="cb30-13"><a href="#cb30-13" aria-hidden="true" tabindex="-1"></a>                                      A_eq <span class="op">=</span> Aeq_costs,</span>
<span id="cb30-14"><a href="#cb30-14" aria-hidden="true" tabindex="-1"></a>                                      b_eq <span class="op">=</span> beq_costs,</span>
<span id="cb30-15"><a href="#cb30-15" aria-hidden="true" tabindex="-1"></a>                                      A_ub <span class="op">=</span> Aub_costs,</span>
<span id="cb30-16"><a href="#cb30-16" aria-hidden="true" tabindex="-1"></a>                                      b_ub <span class="op">=</span> bub_costs</span>
<span id="cb30-17"><a href="#cb30-17" aria-hidden="true" tabindex="-1"></a>                                      )</span></code></pre></div>
<p>Under the demand scenario in Houston, our costs go up to $6250.00.</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>Houston_demand_costs_result.fun</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="op">=&gt;</span></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a><span class="fl">6250.0</span></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a>report(Houston_demand_costs_result.x)</span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a><span class="op">=&gt;</span></span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a>Source     <span class="op">-&gt;</span> Santa Fe  :   <span class="fl">700.00</span></span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true" tabindex="-1"></a>Source     <span class="op">-&gt;</span> El Paso   :   <span class="fl">200.00</span></span>
<span id="cb31-10"><a href="#cb31-10" aria-hidden="true" tabindex="-1"></a>Source     <span class="op">-&gt;</span> Tampa Bay :   <span class="fl">200.00</span></span>
<span id="cb31-11"><a href="#cb31-11" aria-hidden="true" tabindex="-1"></a>Santa Fe   <span class="op">-&gt;</span> Chicago   :   <span class="fl">200.00</span></span>
<span id="cb31-12"><a href="#cb31-12" aria-hidden="true" tabindex="-1"></a>Santa Fe   <span class="op">-&gt;</span> LA        :   <span class="fl">200.00</span></span>
<span id="cb31-13"><a href="#cb31-13" aria-hidden="true" tabindex="-1"></a>Santa Fe   <span class="op">-&gt;</span> Houston   :   <span class="fl">100.00</span></span>
<span id="cb31-14"><a href="#cb31-14" aria-hidden="true" tabindex="-1"></a>Santa Fe   <span class="op">-&gt;</span> Atlanta   :   <span class="fl">200.00</span></span>
<span id="cb31-15"><a href="#cb31-15" aria-hidden="true" tabindex="-1"></a>El Paso    <span class="op">-&gt;</span> LA        :     <span class="fl">0.00</span></span>
<span id="cb31-16"><a href="#cb31-16" aria-hidden="true" tabindex="-1"></a>El Paso    <span class="op">-&gt;</span> Houston   :   <span class="fl">200.00</span></span>
<span id="cb31-17"><a href="#cb31-17" aria-hidden="true" tabindex="-1"></a>El Paso    <span class="op">-&gt;</span> Atlanta   :    <span class="op">-</span><span class="fl">0.00</span></span>
<span id="cb31-18"><a href="#cb31-18" aria-hidden="true" tabindex="-1"></a>Tampa Bay  <span class="op">-&gt;</span> NY        :   <span class="fl">200.00</span></span>
<span id="cb31-19"><a href="#cb31-19" aria-hidden="true" tabindex="-1"></a>Tampa Bay  <span class="op">-&gt;</span> Houston   :     <span class="fl">0.00</span></span>
<span id="cb31-20"><a href="#cb31-20" aria-hidden="true" tabindex="-1"></a>Tampa Bay  <span class="op">-&gt;</span> Atlanta   :     <span class="fl">0.00</span></span>
<span id="cb31-21"><a href="#cb31-21" aria-hidden="true" tabindex="-1"></a>Houston    <span class="op">-&gt;</span> Chicago   :     <span class="fl">0.00</span></span>
<span id="cb31-22"><a href="#cb31-22" aria-hidden="true" tabindex="-1"></a>Houston    <span class="op">-&gt;</span> LA        :     <span class="fl">0.00</span></span>
<span id="cb31-23"><a href="#cb31-23" aria-hidden="true" tabindex="-1"></a>Houston    <span class="op">-&gt;</span> NY        :     <span class="fl">0.00</span></span>
<span id="cb31-24"><a href="#cb31-24" aria-hidden="true" tabindex="-1"></a>Houston    <span class="op">-&gt;</span> Atlanta   :     <span class="fl">0.00</span></span>
<span id="cb31-25"><a href="#cb31-25" aria-hidden="true" tabindex="-1"></a>Atlanta    <span class="op">-&gt;</span> Chicago   :     <span class="fl">0.00</span></span>
<span id="cb31-26"><a href="#cb31-26" aria-hidden="true" tabindex="-1"></a>Atlanta    <span class="op">-&gt;</span> NY        :    <span class="fl">50.00</span></span>
<span id="cb31-27"><a href="#cb31-27" aria-hidden="true" tabindex="-1"></a>Atlanta    <span class="op">-&gt;</span> Houston   :     <span class="fl">0.00</span></span>
<span id="cb31-28"><a href="#cb31-28" aria-hidden="true" tabindex="-1"></a>Chicago    <span class="op">-&gt;</span> Demand    :   <span class="fl">200.00</span></span>
<span id="cb31-29"><a href="#cb31-29" aria-hidden="true" tabindex="-1"></a>LA         <span class="op">-&gt;</span> Demand    :   <span class="fl">200.00</span></span>
<span id="cb31-30"><a href="#cb31-30" aria-hidden="true" tabindex="-1"></a>NY         <span class="op">-&gt;</span> Demand    :   <span class="fl">250.00</span></span>
<span id="cb31-31"><a href="#cb31-31" aria-hidden="true" tabindex="-1"></a>Houston    <span class="op">-&gt;</span> Demand    :   <span class="fl">300.00</span></span>
<span id="cb31-32"><a href="#cb31-32" aria-hidden="true" tabindex="-1"></a>Atlanta    <span class="op">-&gt;</span> Demand    :   <span class="fl">150.00</span></span></code></pre></div>
<h2 id="strike-in-houston">Strike in Houston</h2>
<p>We now model the consequences on our shipping costs of a strike in Houston.
As before, we have to modify the inequality constraints <code>Aub,bub</code>.
We do this in the same manner as we did for the LA situation, and we run the resulting
linear program.</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>strike_Aub_costs <span class="op">=</span> np.array([ sbv(edges.index(e),<span class="bu">len</span>(edges)) <span class="cf">for</span> e <span class="kw">in</span> edges_ship ]</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>                            <span class="op">+</span> [ sbv(edges.index(e),<span class="bu">len</span>(edges)) <span class="cf">for</span> e <span class="kw">in</span> edges_relay ])</span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> strike_capacity(e):</span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">match</span> e[<span class="st">'to'</span>]:</span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> <span class="st">'Houston'</span>:</span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> <span class="dv">100</span></span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> _:</span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> <span class="dv">200</span></span>
<span id="cb32-10"><a href="#cb32-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-11"><a href="#cb32-11" aria-hidden="true" tabindex="-1"></a>strike_bub_costs <span class="op">=</span> np.array([ strike_capacity(e) <span class="cf">for</span> e <span class="kw">in</span> edges_ship]</span>
<span id="cb32-12"><a href="#cb32-12" aria-hidden="true" tabindex="-1"></a>                            <span class="op">+</span> [ strike_capacity(e) <span class="cf">for</span> e <span class="kw">in</span> edges_relay ] )</span>
<span id="cb32-13"><a href="#cb32-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-14"><a href="#cb32-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-15"><a href="#cb32-15" aria-hidden="true" tabindex="-1"></a>Houston_strike_costs_result <span class="op">=</span> linprog(costs_obj,</span>
<span id="cb32-16"><a href="#cb32-16" aria-hidden="true" tabindex="-1"></a>                                 A_eq <span class="op">=</span> Aeq_costs,</span>
<span id="cb32-17"><a href="#cb32-17" aria-hidden="true" tabindex="-1"></a>                                 b_eq <span class="op">=</span> beq_costs,</span>
<span id="cb32-18"><a href="#cb32-18" aria-hidden="true" tabindex="-1"></a>                                 A_ub <span class="op">=</span> strike_Aub_costs,</span>
<span id="cb32-19"><a href="#cb32-19" aria-hidden="true" tabindex="-1"></a>                                 b_ub <span class="op">=</span> strike_bub_costs</span>
<span id="cb32-20"><a href="#cb32-20" aria-hidden="true" tabindex="-1"></a>                                 )</span></code></pre></div>
<p>The result shows that our shipping costs go up to $6050 in the case of a strike in Houston:</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>Houston_strike_costs_result.fun</span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a><span class="op">=&gt;</span></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a><span class="fl">6050.0</span></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>report(Houston_strike_costs_result.x)</span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a><span class="op">=&gt;</span></span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a>Source     <span class="op">-&gt;</span> Santa Fe  :   <span class="fl">700.00</span></span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a>Source     <span class="op">-&gt;</span> El Paso   :   <span class="fl">200.00</span></span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a>Source     <span class="op">-&gt;</span> Tampa Bay :   <span class="fl">200.00</span></span>
<span id="cb33-10"><a href="#cb33-10" aria-hidden="true" tabindex="-1"></a>Santa Fe   <span class="op">-&gt;</span> Chicago   :   <span class="fl">200.00</span></span>
<span id="cb33-11"><a href="#cb33-11" aria-hidden="true" tabindex="-1"></a>Santa Fe   <span class="op">-&gt;</span> LA        :   <span class="fl">200.00</span></span>
<span id="cb33-12"><a href="#cb33-12" aria-hidden="true" tabindex="-1"></a>Santa Fe   <span class="op">-&gt;</span> Houston   :   <span class="fl">100.00</span></span>
<span id="cb33-13"><a href="#cb33-13" aria-hidden="true" tabindex="-1"></a>Santa Fe   <span class="op">-&gt;</span> Atlanta   :   <span class="fl">200.00</span></span>
<span id="cb33-14"><a href="#cb33-14" aria-hidden="true" tabindex="-1"></a>El Paso    <span class="op">-&gt;</span> LA        :    <span class="op">-</span><span class="fl">0.00</span></span>
<span id="cb33-15"><a href="#cb33-15" aria-hidden="true" tabindex="-1"></a>El Paso    <span class="op">-&gt;</span> Houston   :   <span class="fl">100.00</span></span>
<span id="cb33-16"><a href="#cb33-16" aria-hidden="true" tabindex="-1"></a>El Paso    <span class="op">-&gt;</span> Atlanta   :   <span class="fl">100.00</span></span>
<span id="cb33-17"><a href="#cb33-17" aria-hidden="true" tabindex="-1"></a>Tampa Bay  <span class="op">-&gt;</span> NY        :   <span class="fl">200.00</span></span>
<span id="cb33-18"><a href="#cb33-18" aria-hidden="true" tabindex="-1"></a>Tampa Bay  <span class="op">-&gt;</span> Houston   :     <span class="fl">0.00</span></span>
<span id="cb33-19"><a href="#cb33-19" aria-hidden="true" tabindex="-1"></a>Tampa Bay  <span class="op">-&gt;</span> Atlanta   :     <span class="fl">0.00</span></span>
<span id="cb33-20"><a href="#cb33-20" aria-hidden="true" tabindex="-1"></a>Houston    <span class="op">-&gt;</span> Chicago   :     <span class="fl">0.00</span></span>
<span id="cb33-21"><a href="#cb33-21" aria-hidden="true" tabindex="-1"></a>Houston    <span class="op">-&gt;</span> LA        :     <span class="fl">0.00</span></span>
<span id="cb33-22"><a href="#cb33-22" aria-hidden="true" tabindex="-1"></a>Houston    <span class="op">-&gt;</span> NY        :     <span class="fl">0.00</span></span>
<span id="cb33-23"><a href="#cb33-23" aria-hidden="true" tabindex="-1"></a>Houston    <span class="op">-&gt;</span> Atlanta   :     <span class="fl">0.00</span></span>
<span id="cb33-24"><a href="#cb33-24" aria-hidden="true" tabindex="-1"></a>Atlanta    <span class="op">-&gt;</span> Chicago   :    <span class="op">-</span><span class="fl">0.00</span></span>
<span id="cb33-25"><a href="#cb33-25" aria-hidden="true" tabindex="-1"></a>Atlanta    <span class="op">-&gt;</span> NY        :    <span class="fl">50.00</span></span>
<span id="cb33-26"><a href="#cb33-26" aria-hidden="true" tabindex="-1"></a>Atlanta    <span class="op">-&gt;</span> Houston   :   <span class="fl">100.00</span></span>
<span id="cb33-27"><a href="#cb33-27" aria-hidden="true" tabindex="-1"></a>Chicago    <span class="op">-&gt;</span> Demand    :   <span class="fl">200.00</span></span>
<span id="cb33-28"><a href="#cb33-28" aria-hidden="true" tabindex="-1"></a>LA         <span class="op">-&gt;</span> Demand    :   <span class="fl">200.00</span></span>
<span id="cb33-29"><a href="#cb33-29" aria-hidden="true" tabindex="-1"></a>NY         <span class="op">-&gt;</span> Demand    :   <span class="fl">250.00</span></span>
<span id="cb33-30"><a href="#cb33-30" aria-hidden="true" tabindex="-1"></a>Houston    <span class="op">-&gt;</span> Demand    :   <span class="fl">300.00</span></span>
<span id="cb33-31"><a href="#cb33-31" aria-hidden="true" tabindex="-1"></a>Atlanta    <span class="op">-&gt;</span> Demand    :   <span class="fl">150.00</span></span>
<span id="cb33-32"><a href="#cb33-32" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> </span></code></pre></div>
<p>Thus meeting the worker demands costs $200 more than allows the strike. Perhaps the best strategy is to
continue to negotiate with the Houston workers…</p>
<h1 id="profit">Profit</h1>
<p>In order to maximize profit, we need to create the appropriate
objective function.</p>
<p>We define a vector <code>sales</code> such that for a vector <code>x</code> of shipping values,
<code>sales · x</code> returns the profit from sales of the corresponding ducks.</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> profit(e):</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">match</span> e[<span class="st">'from'</span>],e[<span class="st">'to'</span>]:</span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> <span class="st">'Santa Fe'</span>,<span class="st">'Demand'</span>:</span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> <span class="op">-</span><span class="dv">8</span></span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> <span class="st">'El Paso'</span>,<span class="st">'Demand'</span>:</span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> <span class="op">-</span><span class="dv">5</span></span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> <span class="st">'Tampa Bay'</span>,<span class="st">'Demand'</span>:</span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> <span class="op">-</span><span class="dv">10</span></span>
<span id="cb34-9"><a href="#cb34-9" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> <span class="st">'Chicago'</span>,<span class="st">'Demand'</span>:</span>
<span id="cb34-10"><a href="#cb34-10" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> <span class="dv">15</span></span>
<span id="cb34-11"><a href="#cb34-11" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> <span class="st">'NY'</span>,<span class="st">'Demand'</span>:</span>
<span id="cb34-12"><a href="#cb34-12" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> <span class="dv">25</span></span>
<span id="cb34-13"><a href="#cb34-13" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> <span class="st">'Houston'</span>,<span class="st">'Demand'</span>:</span>
<span id="cb34-14"><a href="#cb34-14" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> <span class="dv">10</span></span>
<span id="cb34-15"><a href="#cb34-15" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> <span class="st">'Atlanta'</span>,<span class="st">'Demand'</span>:</span>
<span id="cb34-16"><a href="#cb34-16" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> <span class="dv">10</span></span>
<span id="cb34-17"><a href="#cb34-17" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> <span class="st">'LA'</span>,<span class="st">'Demand'</span>:</span>
<span id="cb34-18"><a href="#cb34-18" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> <span class="dv">20</span></span>
<span id="cb34-19"><a href="#cb34-19" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> _:</span>
<span id="cb34-20"><a href="#cb34-20" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> <span class="dv">0</span></span>
<span id="cb34-21"><a href="#cb34-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-22"><a href="#cb34-22" aria-hidden="true" tabindex="-1"></a>sales <span class="op">=</span> np.array([ profit(e) <span class="cf">for</span> e <span class="kw">in</span> edges])</span></code></pre></div>
<p>Now the objective function for the profit linear program is given by
<code>sales - ship_costs-obj</code>, where <code>ship_costs_obj</code> was the vector computing
the shipping costs.</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>profit_obj <span class="op">=</span> sales <span class="op">-</span> ship_costs_obj</span></code></pre></div>
<p>Now, when maximizing profit, we no longer want to <em>require</em> that we
use all available supplies, and we don’t want to require that we meet
demand in each store.</p>
<p>Thus, we will view the values in the <code>suplies</code> and <code>demand</code> variables as <em>upper bounds</em>.</p>
<p>Thus our equality constraints for the profit linear program will just be the <em>conservation laws</em>:</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>Aeq_profit <span class="op">=</span> conservationMatrix</span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>beq_profit <span class="op">=</span> np.zeros(<span class="bu">len</span>(conservationMatrix))</span></code></pre></div>
<p>And the inequality constraints will be determined by the pair
<code>Aub_profit,bub_profit</code> where</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>Aub_profit <span class="op">=</span> np.concatenate([ [ sbv(edges.index(e),<span class="bu">len</span>(edges)) <span class="cf">for</span> e <span class="kw">in</span> edges_ship ],</span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>                              [ sbv(edges.index(e),<span class="bu">len</span>(edges)) <span class="cf">for</span> e <span class="kw">in</span> edges_relay ],</span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>                              [ sbv(lookupEdgeIndex(<span class="st">'Source'</span>,w),<span class="bu">len</span>(edges))</span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>                                <span class="cf">for</span> w <span class="kw">in</span> warehouse_cities ],                              </span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>                              [ sbv(lookupEdgeIndex(s,<span class="st">'Demand'</span>),<span class="bu">len</span>(edges))</span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a>                                <span class="cf">for</span> s <span class="kw">in</span> store_cities]</span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a>                              ]</span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a>                            , axis<span class="op">=</span><span class="dv">0</span>)</span>
<span id="cb37-9"><a href="#cb37-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-10"><a href="#cb37-10" aria-hidden="true" tabindex="-1"></a>bub_profit <span class="op">=</span> np.concatenate([ [ <span class="dv">200</span> <span class="cf">for</span> e <span class="kw">in</span> edges_ship],</span>
<span id="cb37-11"><a href="#cb37-11" aria-hidden="true" tabindex="-1"></a>                              [ <span class="dv">200</span> <span class="cf">for</span> e <span class="kw">in</span> edges_relay ],</span>
<span id="cb37-12"><a href="#cb37-12" aria-hidden="true" tabindex="-1"></a>                              [ supplies[w] <span class="cf">for</span> w <span class="kw">in</span> warehouse_cities ],</span>
<span id="cb37-13"><a href="#cb37-13" aria-hidden="true" tabindex="-1"></a>                              [ demand[s] <span class="cf">for</span> s <span class="kw">in</span> store_cities ]</span>
<span id="cb37-14"><a href="#cb37-14" aria-hidden="true" tabindex="-1"></a>                             ])</span></code></pre></div>
<p>We now run the linear program maximizing profit:</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>profit_result <span class="op">=</span> linprog((<span class="op">-</span><span class="dv">1</span>)<span class="op">*</span>profit_obj,</span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>                        A_eq <span class="op">=</span> Aeq_profit,</span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>                        b_eq <span class="op">=</span> beq_profit,</span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a>                        A_ub <span class="op">=</span> Aub_profit,</span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a>                        b_ub <span class="op">=</span> bub_profit)</span></code></pre></div>
<p>This shows that the maximum profit is $13,450.00.</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>profit_result.fun</span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a><span class="op">-</span><span class="fl">13450.0</span></span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>report(profit_result.x)</span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a>Source     <span class="op">-&gt;</span> Santa Fe  :   <span class="fl">700.00</span></span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a>Source     <span class="op">-&gt;</span> El Paso   :   <span class="fl">200.00</span></span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a>Source     <span class="op">-&gt;</span> Tampa Bay :   <span class="fl">200.00</span></span>
<span id="cb39-8"><a href="#cb39-8" aria-hidden="true" tabindex="-1"></a>Santa Fe   <span class="op">-&gt;</span> Chicago   :   <span class="fl">200.00</span></span>
<span id="cb39-9"><a href="#cb39-9" aria-hidden="true" tabindex="-1"></a>Santa Fe   <span class="op">-&gt;</span> LA        :   <span class="fl">200.00</span></span>
<span id="cb39-10"><a href="#cb39-10" aria-hidden="true" tabindex="-1"></a>Santa Fe   <span class="op">-&gt;</span> Houston   :   <span class="fl">200.00</span></span>
<span id="cb39-11"><a href="#cb39-11" aria-hidden="true" tabindex="-1"></a>Santa Fe   <span class="op">-&gt;</span> Atlanta   :   <span class="fl">100.00</span></span>
<span id="cb39-12"><a href="#cb39-12" aria-hidden="true" tabindex="-1"></a>El Paso    <span class="op">-&gt;</span> LA        :     <span class="fl">0.00</span></span>
<span id="cb39-13"><a href="#cb39-13" aria-hidden="true" tabindex="-1"></a>El Paso    <span class="op">-&gt;</span> Houston   :   <span class="fl">200.00</span></span>
<span id="cb39-14"><a href="#cb39-14" aria-hidden="true" tabindex="-1"></a>El Paso    <span class="op">-&gt;</span> Atlanta   :    <span class="op">-</span><span class="fl">0.00</span></span>
<span id="cb39-15"><a href="#cb39-15" aria-hidden="true" tabindex="-1"></a>Tampa Bay  <span class="op">-&gt;</span> NY        :     <span class="fl">0.00</span></span>
<span id="cb39-16"><a href="#cb39-16" aria-hidden="true" tabindex="-1"></a>Tampa Bay  <span class="op">-&gt;</span> Houston   :    <span class="op">-</span><span class="fl">0.00</span></span>
<span id="cb39-17"><a href="#cb39-17" aria-hidden="true" tabindex="-1"></a>Tampa Bay  <span class="op">-&gt;</span> Atlanta   :   <span class="fl">200.00</span></span>
<span id="cb39-18"><a href="#cb39-18" aria-hidden="true" tabindex="-1"></a>Houston    <span class="op">-&gt;</span> Chicago   :    <span class="op">-</span><span class="fl">0.00</span></span>
<span id="cb39-19"><a href="#cb39-19" aria-hidden="true" tabindex="-1"></a>Houston    <span class="op">-&gt;</span> LA        :     <span class="fl">0.00</span></span>
<span id="cb39-20"><a href="#cb39-20" aria-hidden="true" tabindex="-1"></a>Houston    <span class="op">-&gt;</span> NY        :   <span class="fl">200.00</span></span>
<span id="cb39-21"><a href="#cb39-21" aria-hidden="true" tabindex="-1"></a>Houston    <span class="op">-&gt;</span> Atlanta   :     <span class="fl">0.00</span></span>
<span id="cb39-22"><a href="#cb39-22" aria-hidden="true" tabindex="-1"></a>Atlanta    <span class="op">-&gt;</span> Chicago   :     <span class="fl">0.00</span></span>
<span id="cb39-23"><a href="#cb39-23" aria-hidden="true" tabindex="-1"></a>Atlanta    <span class="op">-&gt;</span> NY        :    <span class="fl">50.00</span></span>
<span id="cb39-24"><a href="#cb39-24" aria-hidden="true" tabindex="-1"></a>Atlanta    <span class="op">-&gt;</span> Houston   :   <span class="fl">100.00</span></span>
<span id="cb39-25"><a href="#cb39-25" aria-hidden="true" tabindex="-1"></a>Chicago    <span class="op">-&gt;</span> Demand    :   <span class="fl">200.00</span></span>
<span id="cb39-26"><a href="#cb39-26" aria-hidden="true" tabindex="-1"></a>LA         <span class="op">-&gt;</span> Demand    :   <span class="fl">200.00</span></span>
<span id="cb39-27"><a href="#cb39-27" aria-hidden="true" tabindex="-1"></a>NY         <span class="op">-&gt;</span> Demand    :   <span class="fl">250.00</span></span>
<span id="cb39-28"><a href="#cb39-28" aria-hidden="true" tabindex="-1"></a>Houston    <span class="op">-&gt;</span> Demand    :   <span class="fl">300.00</span></span>
<span id="cb39-29"><a href="#cb39-29" aria-hidden="true" tabindex="-1"></a>Atlanta    <span class="op">-&gt;</span> Demand    :   <span class="fl">150.00</span></span></code></pre></div>
<p>Notice that our profit was maximimized by using all available supplies
(700 ducks in Santa Fe, 200 each in El Paso and in Tampa Bay) and
by meeting demand in the stores
(200 ducks in Chicago, 200 in LA, 250 in NY, 300 in Houston and 150 in Atl).</p>
        </main>

        <footer>
	  <nav>
	    <a href="http://www.tufts.edu">
	      <i class="fas fa-chalkboard"></i>
	      Tufts
	    </a>	    
	    <a href="http://math.tufts.edu">
	      <i class="fas fa-chalkboard-teacher"></i>
	      Tufts Math
	    </a>
	    <a href="https://gmcninch-tufts.github.io/math">
	      <i class="fas fa-coffee"></i>
	      G McNinch
	    </a>
	    <a href="https://github.com/gmcninch-tufts">
	      <i class="fab fa-github"></i>
	      GitHub
	    </a>	    
	  </nav>
        </footer>
    </body>
</html>
